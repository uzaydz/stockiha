# إضافة حقل نوع الجهاز لطلبيات التصليح

## التغييرات المطبقة:

### 1. إضافة حقل نوع الجهاز في قاعدة البيانات
- ملف: `supabase/migrations/add_device_type_to_repair_orders.sql`
- إضافة عمود `device_type` إلى جدول `repair_orders`
- إضافة فهرس للبحث السريع
- قيمة افتراضية "غير محدد" للسجلات الموجودة

### 2. تحديث واجهة إضافة/تعديل طلبيات التصليح
- ملف: `src/components/repair/RepairServiceDialog.tsx`
- إضافة حقل إدخال نصي "نوع الجهاز" (مطلوب)
- الحقل يسمح بالكتابة الحرة لنوع الجهاز
- مثال: "آيفون 14 برو"، "لابتوب HP EliteBook"، "سامسونغ A54"
- تحديث معالجة البيانات (إضافة، تعديل، تخزين)

### 3. تحديث وصل الطباعة
- ملف: `src/components/repair/RepairReceiptPrint.tsx`
- إضافة قسم "معلومات الجهاز" في الوصل
- عرض نوع الجهاز بلون بنفسجي مميز
- يظهر فقط إذا كان نوع الجهاز مدخل

### 4. تحديث أنواع البيانات
- ملف: `src/types/repair.ts`
- إضافة `device_type?: string` إلى interface RepairOrder

## كيفية الاستخدام:

1. عند إضافة طلبية تصليح جديدة:
   - أدخل نوع الجهاز في الحقل المخصص
   - الحقل مطلوب ويجب ملؤه

2. عند طباعة الوصل:
   - سيظهر نوع الجهاز في قسم "معلومات الجهاز"
   - يظهر بين بيانات العميل ووصف العطل

3. عند التعديل:
   - سيتم عرض نوع الجهاز المحفوظ سابقاً
   - يمكن تعديله وحفظ التغييرات

## تطبيق Migration:

لتطبيق التغييرات في قاعدة البيانات:
```bash
cd supabase
npx supabase migration up
```

أو تطبيق الملف يدوياً في قاعدة البيانات:
```sql
-- نسخ محتويات ملف add_device_type_to_repair_orders.sql وتنفيذها
```

## ملاحظات:
- الحقل اختياري في قاعدة البيانات (nullable) ولكن مطلوب في الواجهة
- تم إضافة قيمة افتراضية "غير محدد" للسجلات الموجودة
- الطباعة تعمل بشكل تلقائي دون تدخل إضافي 