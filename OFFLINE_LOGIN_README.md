# ูุธุงู ุชุณุฌูู ุงูุฏุฎูู ุงูุฃูููุงูู - ุงูุชูุซูู ุงููุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุดุฑูุน ูููุฑ ูุธุงู ูุตุงุฏูุฉ ูุชูุฏู ูุนูู ุจุฏูู ุฅูุชุฑูุช ููุชุทุจููุงุช ุงูุชู ุชุญุชุงุฌ ุฅูู ุงูููุซูููุฉ ุงูุนุงููุฉ.

ูุฏุนู ุงููุธุงู ููุนูู ูู ุชุณุฌูู ุงูุฏุฎูู:
1. **ุชุณุฌูู ุฏุฎูู ุงููุคุณุณุฉ (Tenant)** - Email + Password
2. **ุชุณุฌูู ุฏุฎูู ุงูููุธููู (Staff)** - 6-Digit PIN

## ๐ ุงููููุงุช ุงููุชููุฑุฉ

### 1. `OFFLINE_LOGIN_QUICK_REFERENCE.md` โญ ุงุจุฏุฃ ูู ููุง
**ุงูุญุฌู**: 9 ูููู ุจุงูุช  
**ุงูููุช**: 5 ุฏูุงุฆู

ูุฑุฌุน ุณุฑูุน ูุฌูุจ ุนูู ุงูุฃุณุฆูุฉ ุงูุณุชุฉ ุงูุฃุณุงุณูุฉ:
- ููู ูุนูู ุชุณุฌูู ุฏุฎูู ุงููุคุณุณุฉ ุฃูููุงููุ
- ููู ูุนูู ุชุณุฌูู ุฏุฎูู ุงูููุธููู ุฃูููุงููุ
- ูู ููุงู ูุธุงู PIN ููููุธูููุ
- ุฃูู ูุชู ุชุฎุฒูู ุจูุงูุงุช ุงููุตุงุฏูุฉ ูุญููุงูุ
- ูู ุงูุจูุงูุงุช ูุดูุฑุฉุ
- ููู ูุชู ุงูุชุญูู ูู ุงููููุฉ ุจุฏูู ุฅูุชุฑูุชุ

**ูุญุชููุงุช**:
- ุงูุฅุฌุงุจุงุช ุงููุฎุชุตุฑุฉ ุนูู ุงูุฃุณุฆูุฉ ุงูุณุชุฉ
- ูุฎุทุท ุณุฑูุน ููููู ุงูุชุฎุฒูู
- ููุฎุต ุงูุฃูุงู ุงูุญุงูู
- ูููู ุงููููุงุช ุงููุงูู
- ุฃูุซูุฉ ููุฏ ููุงุณุชุฎุฏุงู

---

### 2. `OFFLINE_LOGIN_SYSTEM_REPORT.md` ๐ ุงูุชูุฑูุฑ ุงูุดุงูู
**ุงูุญุฌู**: 20 ูููู ุจุงูุช  
**ุงูููุช**: 20-30 ุฏูููุฉ

ุชูุฑูุฑ ุดุงูู ูุชูุตููู ุนู ูุธุงู ุงููุตุงุฏูุฉ:

**ุงููุญุชููุงุช**:
1. ุดุฑุญ ููุตู ููู ูู:
   - ุชุณุฌูู ุฏุฎูู ุงููุคุณุณุฉ ุงูุฃูููุงูู
   - ุชุณุฌูู ุฏุฎูู ุงูููุธููู ุงูุฃูููุงูู
   - ูุธุงู PIN ุงูููุธููู
   - ุฃูุงูู ุชุฎุฒูู ุงูุจูุงูุงุช
   - ุชูุงุตูู ุงูุชุดููุฑ
   - ุขููุงุช ุงูุชุญูู ุจุฏูู ุฅูุชุฑูุช

2. ุชูุงุตูู ุงูุชูููุฐ:
   - ุฃุณูุงุก ุงููููุงุช ุงูุฏูููุฉ
   - ุฃุณุทุฑ ุงูููุฏ ุงูุฑุฆูุณูุฉ
   - ุฃูุซูุฉ ูู ุงูููุฏ ุงููุนูู
   - ูุงุฌูุงุช ุงูุจูุงูุงุช (Interfaces)

3. ุงููููุงุช ุงูุฑุฆูุณูุฉ:
   - 10 ูููุงุช ุฃุณุงุณูุฉ ูุน ุฃูุตุงููุง

4. ุงูุฑุณูู ุงูุชูุถูุญูุฉ:
   - ูุฎุทุทุงุช ุงููุณุงุฑุงุช
   - ููุงูู ุงูุจูุงูุงุช
   - ุชุณูุณู ุงูุนูููุงุช

---

### 3. `OFFLINE_LOGIN_SECURITY_ANALYSIS.md` ๐ ุชุญููู ุงูุฃูุงู
**ุงูุญุฌู**: 19 ูููู ุจุงูุช  
**ุงูููุช**: 30-40 ุฏูููุฉ

ุชุญููู ุดุงูู ููุซุบุฑุงุช ุงูุฃูููุฉ ูุงูุชูุตูุงุช:

**ุงููุญุชููุงุช**:
1. ูุตูููุฉ ุงูุฃูุงู ุงูุญุงููุฉ:
   - ุชุณุฌูู ุฏุฎูู ุงููุคุณุณุฉ
   - ุชุณุฌูู ุฏุฎูู ุงูููุธููู

2. ุงูุซุบุฑุงุช ุงูุฃูููุฉ ุงูุญุฑุฌุฉ:
   - ุชุฎุฒูู ุงูุจูุงูุงุช ูู localStorage ุบูุฑ ูุดูุฑ
   - ุนุฏู ูุฌูุฏ ุญูุงูุฉ ุถุฏ Brute Force
   - ููุชุงุญ Electron ุซุงุจุช
   - ุนุฏู ูุฌูุฏ ุขููุฉ ุฅุจุทุงู
   - ุนุฏู ูุฌูุฏ ุชุญูู ูู ุตูุงุญูุงุช ุงูุฎุงุฏู

3. ุงูุชูุตูุงุช ุงูููุตูุฉ:
   - ุงูุฃููููุฉ 1 (ุญุฑุฌุฉ) - ุงูููู
   - ุงูุฃููููุฉ 2 (ุนุงููุฉ) - ูุฐุง ุงูุฃุณุจูุน
   - ุงูุฃููููุฉ 3 (ูุชูุณุทุฉ) - ูุฐุง ุงูุดูุฑ

4. ุฃูุซูุฉ ุงูููุฏ:
   - Rate Limiting
   - HMAC Validation
   - Dynamic Electron Key
   - Revocation System
   - Audit Logging

5. Checklist ุงูุชูููุฐ:
   - Phase 1 (ุฃุณุจูุน 1-2)
   - Phase 2 (ุฃุณุจูุน 3-4)
   - Phase 3 (ุฃุณุจูุน 5-6)

---

## ๐ฏ ููู ุชุณุชุฎุฏู ูุฐู ุงููููุงุช

### ุฅุฐุง ููุช ูุทูุฑุงู:
1. ุงูุฑุฃ `OFFLINE_LOGIN_QUICK_REFERENCE.md` ุฃููุงู (5 ุฏูุงุฆู)
2. ุชุตูุญ `OFFLINE_LOGIN_SYSTEM_REPORT.md` ููุชูุงุตูู (20 ุฏูููุฉ)
3. ุงุจุญุซ ูู ุงููููุงุช ุงูููุงุจูุฉ ูู ุงููุดุฑูุน

### ุฅุฐุง ููุช ูุญูู ุฃูุงู:
1. ุงูุฑุฃ `OFFLINE_LOGIN_SECURITY_ANALYSIS.md` (40 ุฏูููุฉ)
2. ุฑูุฒ ุนูู "ุงูุซุบุฑุงุช ุงูุฃูููุฉ ุงูุญุฑุฌุฉ"
3. ุฑุงุฌุน "ุงูุชูุตูุงุช ุงูููุตูุฉ"
4. ุงุณุชุฎุฏู "Checklist ุงูุชูููุฐ"

### ุฅุฐุง ููุช ูุฏูุฑุงู:
1. ุงูุฑุฃ "ููุฎุต ุงูุฃูุงู" ูู `OFFLINE_LOGIN_QUICK_REFERENCE.md` (2 ุฏูููุฉ)
2. ุงุทูุน ุนูู "ุงูุฃููููุฉ 1" ูู `OFFLINE_LOGIN_SECURITY_ANALYSIS.md` (5 ุฏูุงุฆู)
3. ุงุณุชุฎุฏู "Checklist ุงูุชูููุฐ" ููุชุฎุทูุท

---

## ๐ ููุฎุต ุฅุญุตุงุฆู

| ุงูุฌุงูุจ | ุงููุตู |
|-------|--------|
| **ุนุฏุฏ ุงููููุงุช ุงููุณุชูุดูุฉ** | 10 ูููุงุช ุฃุณุงุณูุฉ |
| **ุนุฏุฏ ุงููููุงุช ุงูุฏุงุนูุฉ** | 20+ ููู ุฅุถุงูู |
| **ุนุฏุฏ ุงูุฃุณุทุฑ (ุงููุตุฏุฑ)** | 3000+ ุณุทุฑ ููุฏ |
| **ุนุฏุฏ ุงููุซุงุฆู ุงููููุดุฃุฉ** | 3 ูุซุงุฆู ุดุงููุฉ |
| **ุฅุฌูุงูู ูููุงุช ุงููุซุงุฆู** | 12000+ ูููุฉ |
| **ุงูุซุบุฑุงุช ุงููุญุฏุฏุฉ** | 5 ุซุบุฑุงุช ุญุฑุฌุฉ |
| **ุงูุชูุตูุงุช** | 15+ ุชูุตูุฉ |

---

## ๐ ุงูููุงููู ุงูุฃุณุงุณูุฉ

### ุชุณุฌูู ุฏุฎูู ุงููุคุณุณุฉ (Tenant)
```
Supabase Auth (Online) OR localStorage (Offline)
         โ
Save: offline auth snapshot
         โ
Offline Session Valid: expires_at not passed
```

### ุชุณุฌูู ุฏุฎูู ุงูููุธููู (Staff)
```
6-Digit PIN
         โ
Hash: SHA-256(salt:PIN)
         โ
Store: IndexedDB (staffPins table)
         โ
Verify: Compare hashes
```

### ุงูุชุฎุฒูู
```
Browser:
- localStorage (plain text โ๏ธ)
- sessionStorage (temporary)
- IndexedDB/Dexie (structured)

Electron:
- electron-store (encrypted)
```

### ุงูุชุดููุฑ
```
โ PIN: SHA-256 + 16-byte salt
โ Session: AES-GCM (optional)
โ๏ธ localStorage: plain JSON
โ๏ธ Electron key: static
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ููุฃูุงู (Week 1):
- [ ] Rate limiting for PIN attempts
- [ ] Account lockout mechanism
- [ ] Data integrity checks (HMAC)

### ููููุฒุงุช (Week 2-3):
- [ ] PIN revocation system
- [ ] Audit logging
- [ ] Permission sync

### ููุฃุฏุงุก (Week 4+):
- [ ] IndexedDB encryption
- [ ] Service worker layer
- [ ] Data compression

---

## ๐ ุงููุฑุงุฌุน

### OWASP
- Authentication Cheat Sheet
- Secure Local Storage
- Password Storage Cheat Sheet

### Electron
- Security Best Practices
- Native Modules
- IPC Security

### Web APIs
- Web Crypto API
- IndexedDB
- localStorage/sessionStorage

---

## ๐ ุงูุฏุนู

ููุฃุณุฆูุฉ ุฃู ุงูุชูุถูุญุงุช:
1. ุฑุงุฌุน ุงูููู ุงูููุงุฆู ูู ุงูุซูุงุซุฉ
2. ุงุจุญุซ ุนู ุฑูู ุงูุณุทุฑ ุงููุฐููุฑ
3. ุชุญูู ูู ุฃูุซูุฉ ุงูููุฏ

---

## โ Checklist ูููุฑุงุกุฉ

- [ ] ูุฑุฃุช `OFFLINE_LOGIN_QUICK_REFERENCE.md`
- [ ] ูููุช ุงูุฅุฌุงุจุงุช ุงูุณุชุฉ ุงูุฃุณุงุณูุฉ
- [ ] ูุฑุฃุช `OFFLINE_LOGIN_SYSTEM_REPORT.md`
- [ ] ูููุช ูููู ุงูุชุฎุฒูู ูุงูุชุดููุฑ
- [ ] ูุฑุฃุช `OFFLINE_LOGIN_SECURITY_ANALYSIS.md`
- [ ] ุญุฏุฏุช ุงูุซุบุฑุงุช ุงูุญุฑุฌุฉ
- [ ] ุชุฎุทุท ููุชูููุฐ ุจูุงุกู ุนูู ุงูุฃููููุงุช

---

## ๐ ููุงุญุธุงุช

ูุฐู ุงููุซุงุฆู ุชู ุฅูุดุงุคูุง ุนูู ุฃุณุงุณ ุงุณุชูุดุงู ุดุงูู ููุงุนุฏุฉ ุงูููุฏ ูุชุญููู ูู ููู.
ุชุชุถูู ุฃูุซูุฉ ุญููููุฉ ูู ุงูููุฏ ูุชูุตูุงุช ุนูููุฉ ูุงุจูุฉ ููุชูููุฐ.

ุขุฎุฑ ุชุญุฏูุซ: 2024-11-04

---

## ๐ ูููุฒูุฏ ูู ุงููุนูููุงุช

ุงูุธุฑ ุงููููุงุช ุงูุชุงููุฉ ูู ุงููุดุฑูุน:
- src/lib/offline/staffCredentials.ts
- src/pages/StaffLogin.tsx
- src/context/auth/services/authService.ts
- src/context/auth/utils/authStorage.ts
- src/database/localDb.ts
- electron/secureStorage.cjs

