<!DOCTYPE html>
<html lang="ar" dir="rtl" class="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Ø¥Ø²Ø§Ù„Ø© ÙˆØ³ÙˆÙ… http-equiv ØºÙŠØ± Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ù„Ø¶ØºØ· Ù„ØªÙØ§Ø¯ÙŠ Ø³Ù„ÙˆÙƒ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª/Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ -->
    
    <!-- Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø£Ù…Ø§Ù† ØªÙØ¯Ø§Ø± Ù…Ù† Ø®Ù„Ø§Ù„ Vite middleware Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† meta element Ù„ØªØ¬Ù†Ø¨ Ù…Ø´Ø§ÙƒÙ„ frame-ancestors -->

    <title>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</title>
    <meta name="description" content="Ø³Ø·ÙˆÙƒÙŠÙ‡Ø§ - Ù…Ù†ØµØ© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©" />
    <meta name="author" content="Ø³Ø·ÙˆÙƒÙŠÙ‡Ø§" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/logo-new.webp">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/logo-new.webp">
    
    <!-- ğŸš€ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ù…Ø­Ø³Ù† Ù„Ù„Ø£Ø¯Ø§Ø¡ - preload Ø£Ø³Ø§Ø³ÙŠ ÙÙ‚Ø· -->
    <link rel="preload" as="font" href="/fonts/tajawal-regular.woff2" type="font/woff2" crossorigin="anonymous">
    
    <!-- ØªØ­Ù…ÙŠÙ„ CSS Ø§Ù„Ø®Ø·ÙˆØ· ÙÙˆØ±Ø§Ù‹ Ù„ØªØ¬Ù†Ø¨ FOUT -->
    <link rel="stylesheet" href="/fonts/tajawal.css">
    
    <!-- ØªØ­Ù…ÙŠÙ„ CSS Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ - Ø¶Ø±ÙˆØ±ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ -->
    <link rel="stylesheet" href="/src/index.css">
    
    <!-- ØªØ­Ø³ÙŠÙ† Ø¥Ø¶Ø§ÙÙŠ: ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© -->
    <script nonce="{{CSP_NONCE}}">
      // Smart font loading strategy
      (function() {
        var fontsLoaded = false;
        
        // Function to load additional fonts
        function loadAdditionalFonts() {
          if (fontsLoaded) return;
          fontsLoaded = true;
          
          var additionalFonts = [
            '/fonts/tajawal-medium.woff2',
            '/fonts/tajawal-bold.woff2'
          ];
          
          additionalFonts.forEach(function(fontUrl) {
            var link = document.createElement('link');
            // Ø§Ø³ØªØ®Ø¯Ù… prefetch Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† preload Ù„ØªØ¬Ù†Ù‘Ø¨ ØªØ­Ø°ÙŠØ± "preloaded but not used"
            link.rel = 'prefetch';
            link.as = 'font';
            link.type = 'font/woff2';
            link.crossOrigin = 'anonymous';
            link.href = fontUrl;
            document.head.appendChild(link);
          });
        }
        
        // Load additional fonts on user interaction or after delay
        var events = ['mousedown', 'touchstart', 'keydown', 'wheel'];
        events.forEach(function(event) {
          document.addEventListener(event, loadAdditionalFonts, { once: true, passive: true });
        });
        
        // Fallback: load after 2 seconds if no interaction
        setTimeout(loadAdditionalFonts, 2000);
      })();
    </script>
    
    <!-- Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±ÙŠØ¨Øª Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø© -->
    <script nonce="{{CSP_NONCE}}">
      // Ø­Ø§ÙˆÙ„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸ Ù‚Ø¨Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„Ù…Ù†Ø¹ ÙˆÙ…ÙŠØ¶ Ø§Ù„Ø´Ø§Ø´Ø©
      const storedTheme = localStorage.getItem('theme') || 'light';
      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      const initialTheme = storedTheme === 'system' ? systemTheme : storedTheme;
      document.documentElement.classList.add(initialTheme);
      document.documentElement.style.colorScheme = initialTheme;
    </script>
    
    <!-- ğŸš€ Resource Hints Ù…Ø­Ø³Ù†Ø© Ù„Ù„Ø£Ø¯Ø§Ø¡ -->
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//api.vercel.com">
    
    <!-- ğŸš€ Preconnect Ù„Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø­Ø±Ø¬Ø© -->
    <link rel="preconnect" href="%VITE_SUPABASE_URL%" crossorigin>
    
    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª JavaScript Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
    <script nonce="{{CSP_NONCE}}">
      // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø£Ø¯Ø§Ø¡
      window.process = window.process || { env: {} };
      window.global = window.global || window;
      
      // ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø®Ø·ÙˆØ·
      if ('fonts' in document) {
        document.fonts.ready.then(() => {
          document.documentElement.classList.add('fonts-loaded');
        });
      }
    </script>
    
    <!-- ğŸ¯ ØªØ­Ø³ÙŠÙ† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ - Ø¥Ø²Ø§Ù„Ø© preload ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠ -->
    <!-- ØªÙ… Ø¥Ø²Ø§Ù„Ø© preload Ù„Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙŠ ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© Vite ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ -->
    
    <!-- âŒ Ø¥Ø²Ø§Ù„Ø© Google Fonts: Ù†Ø¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø· Ù„Ù„Ø£Ø¯Ø§Ø¡ -->
    
    <!-- ğŸš€ Critical CSS will be loaded via React imports -->
    
    <!-- ğŸš€ CRITICAL CSS INLINE (Ù…ØµØºÙ‘Ø± Ø¬Ø¯Ø§Ù‹: Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª ÙˆØ§Ù„Ù„ÙˆØ¯Ø± ÙÙ‚Ø·) -->
    <style>
      html {
        font-family: 'Tajawal', 'Arial Unicode MS', 'Tahoma', 'Arial', sans-serif;
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      body {
        margin: 0;
        padding: 0;
        direction: rtl;
        text-align: right;
        min-height: 100vh;
        background: #ffffff;
        color: #000000;
        overflow-x: hidden;
      }
      #root { min-height: 100vh; }
      .loading-container {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999;
        padding: 1rem;
        border-radius: 0.5rem;
        background: #ffffff;
      }
      .loading-spinner {
        width: 32px;
        height: 32px;
        border: 2px solid #e5e7eb;
        border-top-color: #6b21a8;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }
      @keyframes spin { to { transform: rotate(360deg); } }
      * { box-sizing: border-box; }
    </style>
    
    <!-- ğŸš€ ØªØ­Ù…ÙŠÙ„ CSS Ù…Ø­Ø³Ù† Ù„ØªÙ‚Ù„ÙŠÙ„ Render Blocking (ØªØ¹Ø·ÙŠÙ„ ÙÙŠ Ø§Ù„ØªØ·ÙˆÙŠØ±) -->
    <script nonce="{{CSP_NONCE}}">
      (function(){
        // Ù„Ø§ ØªÙØ­Ù…Ù‘ÙÙ„ CSS Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ ÙÙŠ Ø¨ÙŠØ¦Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± (localhost/127.*)
        var host = location.hostname || '';
        // Ø§Ø¹ØªØ¨Ø± subdomain.localhost Ø¨ÙŠØ¦Ø© ØªØ·ÙˆÙŠØ± Ø£ÙŠØ¶Ø§Ù‹ (asraycollection.localhost)
        var isDev = host === 'localhost' || host.endsWith('.localhost') || host.indexOf('127.') === 0 || host === '::1' || host === '0.0.0.0';
        if (isDev) return;

        // ØªØ­Ù…ÙŠÙ„ CSS Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚
        function loadNonCriticalCSS() {
          // ØªØ­Ù…ÙŠÙ„ CSS Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ù…ÙÙ†ØªØ¬ Ù…Ù† Vite
          var mainCSS = document.querySelector('link[rel="stylesheet"][href*="main-"]');
          if (!mainCSS) {
            // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ CSS Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØŒ Ø§Ø¨Ø­Ø« Ø¹Ù†Ù‡ ÙˆØ­Ù…Ù‘Ù„Ù‡
            loadCSS('/assets/css/main-CbztG7-1.css');
          }
        }

        function loadCSS(href) {
          var link = document.createElement('link');
          link.rel = 'stylesheet';
          link.href = href;
          link.media = 'print';
          link.onload = function(){ this.media = 'all'; this.onload = null; };
          link.onerror = function(){ console.warn('Failed to load CSS:', href); };
          document.head.appendChild(link);
        }

        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', loadNonCriticalCSS);
        } else {
          loadNonCriticalCSS();
        }
      })();
    </script>

    <meta property="og:title" content="Ø³Ø·ÙˆÙƒÙŠÙ‡Ø§ - Ù…Ù†ØµØ© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ø°ÙƒÙŠØ©" />
    <meta property="og:description" content="Ù…Ù†ØµØ© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/images/logo-new.webp" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@stockiha" />
    <meta name="twitter:image" content="/images/logo-new.webp" />
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#6b21a8">
    
    <!-- Ù…Ø®ØµØµ Ù„Ù€ Vercel Ùˆ SPA -->
    <meta name="vercel-deployment" content="true">
    <meta name="format-detection" content="telephone=no">
  </head>

  <body>
    <div id="root">
      <!-- PERFORMANCE OPTIMIZATION: Loading screen for better perceived performance -->
      <div class="loading-container" id="initial-loading">
        <div class="loading-spinner"></div>
      </div>
    </div>
    
    <!-- Remove loading screen when React loads -->
    <script nonce="{{CSP_NONCE}}">
      // ğŸš€ Ø¯Ø§Ù„Ø© Ø¹Ø§Ù…Ø© Ù„Ø¥Ø²Ø§Ù„Ø© Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ - Ø³ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¤Ù‡Ø§ Ù…Ù† React
      window.removeInitialLoading = function() {
        const loadingScreen = document.getElementById('initial-loading');
        if (loadingScreen) {
          loadingScreen.style.opacity = '0';
          loadingScreen.style.transition = 'opacity 0.15s ease'; // âœ… ØªÙ‚Ù„ÙŠÙ„ Ù…Ù† 0.3s Ø¥Ù„Ù‰ 0.15s
          setTimeout(() => {
            if (loadingScreen.parentNode) {
              loadingScreen.remove();
            }
          }, 150); // âœ… ØªÙ‚Ù„ÙŠÙ„ Ù…Ù† 300ms Ø¥Ù„Ù‰ 150ms Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
        }
      };

      // â›‘ï¸ Ø§Ø­ØªÙŠØ§Ø·: Ø¥Ø²Ø§Ù„Ø© Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ù…Ù‡Ù„Ø© Ù‚ØµÙŠØ±Ø© Ø­ØªÙ‰ Ù„Ùˆ Ù„Ù… ÙŠØ³ØªØ¯Ø¹Ù‡Ø§ React
      setTimeout(() => {
        try { if (typeof window.removeInitialLoading === 'function') window.removeInitialLoading(); } catch {}
      }, 2500);

      // ğŸš€ ØªØ­Ø¯ÙŠØ« Ù…Ø¨ÙƒØ± Ù„Ù„Ø¹Ù†ÙˆØ§Ù†/Ø§Ù„ÙˆØµÙ/Ø§Ù„ÙØ§ÙÙŠÙƒÙˆÙ† Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ cache Ø£Ùˆ Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù†Ø·Ø§Ù‚
      const earlyHeadUpdate = () => {
        try {
          const hostname = window.location.hostname;
          
          // ÙØ­Øµ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
          const isPublicDomain = ['ktobi.online', 'www.ktobi.online', 'stockiha.com', 'www.stockiha.com', 'stockiha.pages.dev'].includes(hostname);
          
          // Ù„Ø§ Ù†Ø¹Ø¯Ù„ Ø´ÙŠØ¦Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ† Ø§Ù„Ø¹Ø§Ù… (ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØµØ©)
          if (isPublicDomain) return;

          // Ø§Ø³ØªÙ†ØªØ§Ø¬ Ù…Ø¹Ø±Ù Ø§Ù„Ù…ØªØ¬Ø± Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
          const baseDomains = ['.ktobi.online', '.stockiha.com'];
          const isLocalhost = hostname.includes('localhost') || hostname.startsWith('127.');
          const isBaseDomain = baseDomains.some(d => hostname.endsWith(d));
          const isCustomDomain = !isLocalhost && !isBaseDomain;

          let storeIdentifier = '';
          if (isCustomDomain) {
            storeIdentifier = hostname.startsWith('www.') ? hostname.substring(4) : hostname;
          } else if (isBaseDomain) {
            const parts = hostname.split('.');
            if (parts.length > 2 && parts[0] !== 'www') storeIdentifier = parts[0];
          } else if (isLocalhost && hostname.includes('.')) {
            const parts = hostname.split('.');
            if (parts.length > 1 && parts[0] !== 'localhost') storeIdentifier = parts[0];
          }

          // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© ØµØºÙŠØ±Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ÙÙŠÙƒÙˆÙ† ÙˆØ§Ù„Ù…ÙŠØªØ§
          const setFavicon = (iconUrl, name) => {
            try {
              // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø³Ø§Ø¨Ù‚Ø© Ù„ØªÙØ§Ø¯ÙŠ Ø§Ù„ØªÙƒØ±Ø§Ø±
              document.querySelectorAll('link[rel="icon"], link[rel="shortcut icon"]').forEach(el => el.remove());
              const link = document.createElement('link');
              link.rel = 'icon';
              link.type = 'image/x-icon';
              if (iconUrl) {
                link.href = `${iconUrl}?v=${Date.now()}`;
              } else {
                const initial = (name || 'Ù…').charAt(0);
                const svg = `
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                    <defs>
                      <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#22c55e;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#16a34a;stop-opacity:1" />
                      </linearGradient>
                    </defs>
                    <rect width="100" height="100" rx="20" fill="url(#grad)"/>
                    <path d="M25 35h50l-5 30H30z" fill="white" opacity="0.9"/>
                    <circle cx="35" cy="75" r="5" fill="white"/>
                    <circle cx="65" cy="75" r="5" fill="white"/>
                    <path d="M35 25l5 10h20l5-10" stroke="white" stroke-width="3" fill="none"/>
                    <text x="50" y="55" text-anchor="middle" font-family="Arial" font-size="38" font-weight="bold" fill="white">${initial}</text>
                  </svg>
                `;
                link.href = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svg)));
              }
              document.head.appendChild(link);
              // Ø¥Ø¶Ø§ÙØ© shortcut icon Ù„Ø¯Ø¹Ù… Ø£ÙˆØ³Ø¹
              const shortcut = link.cloneNode();
              shortcut.rel = 'shortcut icon';
              document.head.appendChild(shortcut);
            } catch {}
          };

          const setMeta = (desc, title, ogImage) => {
            try {
              if (title) document.title = title;
              if (desc) {
                let m = document.querySelector('meta[name="description"]');
                if (!m) { m = document.createElement('meta'); m.setAttribute('name','description'); document.head.appendChild(m); }
                m.setAttribute('content', desc);
              }
              if (title) {
                let ogt = document.querySelector('meta[property="og:title"]');
                if (!ogt) { ogt = document.createElement('meta'); ogt.setAttribute('property','og:title'); document.head.appendChild(ogt); }
                ogt.setAttribute('content', title);
              }
              if (desc) {
                let ogd = document.querySelector('meta[property="og:description"]');
                if (!ogd) { ogd = document.createElement('meta'); ogd.setAttribute('property','og:description'); document.head.appendChild(ogd); }
                ogd.setAttribute('content', desc);
              }
              if (ogImage) {
                let ogi = document.querySelector('meta[property="og:image"]');
                if (!ogi) { ogi = document.createElement('meta'); ogi.setAttribute('property','og:image'); document.head.appendChild(ogi); }
                ogi.setAttribute('content', ogImage);
              }
            } catch {}
          };

          // 0) Ø¥Ù† ØªÙ… Ø­Ù‚Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù†ØªØ¬ Ù…Ù† Cloudflare WorkerØŒ Ø§Ø³ØªØ®Ø¯Ù…Ù‡Ø§ ÙÙˆØ±Ø§Ù‹
          try {
            const pre = document.getElementById('__PRELOADED_PRODUCT__');
            if (pre && pre.textContent) {
              const json = JSON.parse(pre.textContent.trim());
              const data = json?.data || null;
              const p = data?.product || data || null;
              const pname = p?.name || null;
              const pdesc = (p?.description || '').toString().replace(/<[^>]*>/g, '').trim().slice(0, 140);
              const pimg = p?.images?.thumbnail_image || (p?.images?.additional_images && p?.images?.additional_images[0]?.url) || null;
              if (pname) {
                // Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø¥Ù† ÙƒØ§Ù† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙØ¹Ù„ (Ø­Ù‚Ù† Ø§Ù„Ø­Ø§ÙØ© Ø³Ø¨Ù‚Ù†Ø§)
                if (!document.title || !document.title.includes(pname)) {
                  setMeta(pdesc || '', pname, pimg || '');
                }
                return;
              }
            }
          } catch {}

          // 1) Ø­Ø§ÙˆÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹
          if (storeIdentifier) {
            const keysToTry = [
              `early_preload_${storeIdentifier}`,
              // ÙÙŠ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© Ø¬Ø±Ù‘Ø¨ Ø£ÙŠØ¶Ø§Ù‹ Ø£ÙˆÙ„ Ø¬Ø²Ø¡ ÙƒÙ€ subdomain Ø§Ø­ØªÙŠØ§Ø·ÙŠ
              ...(isCustomDomain ? [`early_preload_${storeIdentifier.split('.')[0]}`] : [])
            ];
            for (const k of keysToTry) {
              const raw = localStorage.getItem(k) || sessionStorage.getItem(k);
              if (raw) {
                try {
                  const parsed = JSON.parse(raw);
                  const data = parsed?.data || parsed; // Ø¯Ø¹Ù… ÙƒÙ„Ø§ Ø§Ù„Ø´ÙƒÙ„ÙŠÙ†
                  const siteName = data?.organization_settings?.site_name || data?.organization_details?.name;
                  const seoTitle = data?.seo_meta?.title || siteName;
                  const seoDesc = data?.seo_meta?.description || data?.organization_details?.description;
                  const icon = data?.organization_settings?.favicon_url || data?.organization_settings?.logo_url || data?.organization_details?.logo_url;
                  const ogImage = data?.seo_meta?.image || data?.organization_settings?.logo_url || data?.organization_details?.logo_url;
                  if (seoTitle || seoDesc || icon) {
                    setMeta(seoDesc || '', seoTitle || siteName || '', ogImage || '');
                    setFavicon(icon, siteName);
                    return; // ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ø¬Ø§Ø­ Ù…Ù† Ø§Ù„Ù€ cache
                  }
                } catch {}
              }
            }
          }

          // 2) Ù„Ø§ ÙŠÙˆØ¬Ø¯ cache:
          // Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© (Ø¨Ø¯ÙˆÙ† subdomain) Ù„Ø§ Ù†Ø¨Ø¯Ù‘Ù„ Ø§Ù„ÙØ§ÙÙŠÙƒÙˆÙ† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù…Ù†ØµØ©
          if (!storeIdentifier) {
            // Ø§ØªØ±Ùƒ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙØ§ÙÙŠÙƒÙˆÙ† Ø§Ù„Ø«Ø§Ø¨ØªØ© Ù…Ù† index.html ÙƒÙ…Ø§ Ù‡ÙŠ
            // ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙÙ‚Ø· Ø¥Ù† Ø£Ø±Ø¯ØªØŒ Ù„ÙƒÙ† Ù„Ø§ ØªÙ„Ù…Ø³ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
            try {
              let rawName = hostname.startsWith('www.') ? hostname.substring(4) : hostname;
              const fallbackName = (rawName.split('.')[0] || 'Ù…ØªØ¬Ø±');
              if (!document.title || document.title === 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...') {
                document.title = `Ø³Ø·ÙˆÙƒÙŠÙ‡Ø§`;
              }
            } catch {}
            return;
          }

          // Ù†Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…ØªØ§Ø¬Ø±: Ø¹Ù†ÙˆØ§Ù† ÙˆÙØ§ÙÙŠÙƒÙˆÙ† Ù…Ø­Ø§ÙŠØ¯Ø§Ù† Ø­ØªÙ‰ ÙŠØ¨Ø¯Ø£ React
          let rawName = hostname.startsWith('www.') ? hostname.substring(4) : hostname;
          const fallbackName = (rawName.split('.')[0] || 'Ù…ØªØ¬Ø±');
          // Ù„Ø§ ØªØ³Ø¨Ù‚ Ø§Ù„Ø§Ø³Ù… Ø¨ÙƒÙ„Ù…Ø© "Ù…ØªØ¬Ø±" Ù„ØªØ¬Ù†Ø¨ ÙˆÙ…ÙŠØ¶ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
          if (!document.title || document.title === 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...') {
            document.title = `${fallbackName}`;
          }
          setFavicon(null, fallbackName);
        } catch (error) {
          console.warn('Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø¨ÙƒØ±:', error);
        }
      };

      // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¨ÙƒØ± Ù…Ø¨Ø§Ø´Ø±Ø©Ù‹
      earlyHeadUpdate();
    </script>
    
    <!-- Main Application Entry -->
    <script type="module" src="/src/main.tsx"></script>


  </body>
</html>
