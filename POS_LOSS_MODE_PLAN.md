# ๐ ุชุญููู ูุฎุทุฉ: ุฏูุฌ ูุธุงู ุงูุฎุณุงุฆุฑ ูู ููุทุฉ ุงูุจูุน (POS Loss Mode)

## 1. ุงูููุฑุฉ ูุงูุชุญููู (Concept Analysis)

### ๐ก ุงูููุฑุฉ:

### โ ุงูุฅูุฌุงุจูุงุช (Pros):
1.  **ุชูุญูุฏ ุงูุชุฌุฑุจุฉ:** ุงููุณุชุฎุฏู ูุนุฑู ุจุงููุนู ููู ูุณุชุฎุฏู ุงูู POS. ูู ูุญุชุงุฌ ูุชุนูู ูุงุฌูุฉ ุฌุฏูุฏุฉ.
2.  **ุงูุณุฑุนุฉ:** ุฅุฐุง ุณูุท ููุชุฌ ูุงููุณุฑ ุฃุซูุงุก ุงูุนููุ ูููู ูููุงุดูุฑ ุชุณุฌููู ููุฑุงู ุฏูู ุงูุฎุฑูุฌ ูู ุดุงุดุฉ ุงูุจูุน.
3.  **ุงูููุงุกุฉ:** ุงุณุชุฎุฏุงู ููุณ ุฃุฏูุงุช ุงูุจุญุซ ูุงููุงุณุญ ุงูุถูุฆู (Scanner) ุงููููุฉ ุงูููุฌูุฏุฉ ูู ุงูู POS.
4.  **ููุน ุงูุฃุฎุทุงุก:** ูุดุจู ูุธุงู ุงูุฅุฑุฌุงุนุ ูุฐุง ูู ููุทูู ุฐูููุงู ูููุณุชุฎุฏู.

### โ๏ธ ุงูุชุญุฏูุงุช (Challenges):
1.  **ุงูุฎุทูุฑุฉ:** ูุฌุจ ุฃู ูููู ุงูุชูููุฒ ุงูุจุตุฑู ุตุงุฑุฎุงู ุฌุฏุงู (ูุซูุงู: ุฅุทุงุฑ ุฃุญูุฑ ุนุฑูุถ) ุญุชู ูุง ูุจูุน ุงููุงุดูุฑ ููุชุฌุงุช ููุณุฌููุง ูุฎุณุงุฆุฑ ุจุงูุฎุทุฃุ ุฃู ุงูุนูุณ.
2.  **ุงูุจูุงูุงุช ุงูุฅุถุงููุฉ:** ุงูุฎุณุงุฆุฑ ุชุชุทูุจ ุฃุญูุงูุงู "ุตูุฑุฉ" ุฃู "ููุงุญุธุฉ ุทูููุฉ" ุฃู "ุงุณู ุงูุดุงูุฏ"ุ ููู ูุง ูุฏ ูุนูู ุณุฑุนุฉ ุงูู POS ุฅุฐุง ูู ูุตูู ุจุฐูุงุก.

---

## 2. ุณูุฑ ุงูุนูู ุงูููุชุฑุญ (Proposed Workflow)

1.  **ุงูุฏุฎูู:** ูุถุบุท ุงููุณุชุฎุฏู ุนูู ุฒุฑ "Loss Mode" (ุฃููููุฉ ูุซูุซ ุชุญุฐูุฑ โ๏ธ) ูู ุฃุนูู ุงูู POS.
2.  **ุงูุชุญูู:**
    *   ูุชุบูุฑ ููู ุงูุดุฑูุท ุงูุนููู (TitleBar) ุฅูู **ุงูุฃุญูุฑ ุงูุฏุงูู**.
    *   ุชุธูุฑ ุดุงุฑุฉ "ูุถุน ุชุณุฌูู ุงูุฎุณุงุฆุฑ" ูุงุถุญุฉ.
    *   ูุชู ุชูุฑูุบ ุงูุณูุฉ ุงูุญุงููุฉ (ุฃู ุญูุธูุง ููุณูุฏุฉ) ูุจุฏุก ุณูุฉ ุงูุฎุณุงุฆุฑ.
3.  **ุงูุฅุถุงูุฉ:**
    *   ูููู ุงููุณุชุฎุฏู ุจูุณุญ ุงูููุชุฌ.
    *   ุชุธูุฑ ูุงูุฐุฉ ุตุบูุฑุฉ (Popover) ููุฑุงู: "ุงุฎุชุฑ ุณุจุจ ุงูุฎุณุงุฑุฉ" (ุฃููููุงุช ูุจูุฑุฉ: ุชูู ๐ุ ูุณุฑ ๐จุ ุณุฑูุฉ ๐ฆน).
    *   ูููู ุชุฎุทู ุงูุณุจุจ ููุชู ุชุนูููู ูุงุญูุงู "ุงูุชุฑุงุถู: ุชุงูู".
4.  **ุงูุณูุฉ:**
    *   ุนูุงุตุฑ ุงูุณูุฉ ุชุธูุฑ ูุน "ูุณู" ุตุบูุฑ ููุถุญ ุงูุณุจุจ.
    *   ุจุฏูุงู ูู "ุงููุฌููุน ุงููุทููุจ"ุ ูุธูุฑ "ุฅุฌูุงูู ูููุฉ ุงูุฎุณุงุฑุฉ".
5.  **ุงูุชูููุฐ:**
    *   ุฒุฑ ุงูุฏูุน ุงููุจูุฑ ูุตุจุญ ูููู ุฃุญูุฑ ูููุชูุจ ุนููู "ุชุฃููุฏ ุงูุฎุณุงุฑุฉ".
    *   ุนูุฏ ุงูุถุบุทุ ูุชู ุฅูุดุงุก ุณุฌู ุงูุฎุณุงุฑุฉุ ูุทุจุงุนุฉ "ุณูุฏ ุฅุชูุงู" (ุงุฎุชูุงุฑู)ุ ูุชูุฑูุบ ุงูุณูุฉ.

---

## 3. ุงูุฎุทุฉ ุงูุชูููุฉ (Technical Implementation Plan)

### ุฃ. ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State Management)
*   **Context:** ุชุญุฏูุซ `POSContext` ุฃู `CartContext` ูุฅุถุงูุฉ ุญุงูุฉ ุฌุฏูุฏุฉ:
    ```typescript
    type POSMode = 'sales' | 'return' | 'loss';
    ```
*   **Cart Item:** ุชุนุฏูู ููุน ุนูุตุฑ ุงูุณูุฉ `CartItem` ูููุจู ุญููู ุงุฎุชูุงุฑูุฉ ุฌุฏูุฏุฉ:
    ```typescript
    interface CartItem {
       // ... existing fields
       lossType?: LossType; // 'damaged', 'expired', etc.
       lossNote?: string;
    }
    ```

### ุจ. ูุงุฌูุฉ ุงููุณุชุฎุฏู (UI Components)

1.  **`POSTitleBarActions.tsx`:**
    *   ุฅุถุงูุฉ ุฒุฑ `Switch to Loss Mode` (ูุดุงุจู ูุฒุฑ ุงูู Quick Actions).
    *   ุฅุถุงูุฉ ูุคุดุฑ ุจุตุฑู ููู (ูุซูุงู `border-red-500`) ุญูู ุงูุดุงุดุฉ ุจุฃููููุง ุนูุฏ ุงูุชูุนูู.

2.  **`ProductCard.tsx` / `ProductListItem.tsx`:**
    *   ุนูุฏ ุงูุถุบุท ูู ูุถุน ุงูุฎุณุงุฑุฉุ ูุฏ ููุชุญ `Dialog` ุจุณูุท ูุงุฎุชูุงุฑ ุงูุณุจุจ ูุงููููุฉ ุจุฏูุงู ูู ุงูุฅุถุงูุฉ ุงููุจุงุดุฑุฉ.

3.  **`CartPanel.tsx`:**
    *   ุชุบููุฑ ุงููุตูุต (Total -> Loss Value).
    *   ุฒุฑ `CheckoutButton` ูุณุชุฏุนู ุฏุงูุฉ `submitLossDeclaration`.

4.  **`LossReasonSelector.tsx`:**
    *   ูููู ุฌุฏูุฏ ูุนุฑุถ ุฃุณุจุงุจ ุงูุฎุณุงุฑุฉ ูุฃููููุงุช ุณุฑูุนุฉ ุงูุงุฎุชูุงุฑ.

### ุฌ. ุงูููุทู (Logic & Services)
*   ุฅูุดุงุก ุฏุงูุฉ `handleLossSubmission` ูู `usePOSActions`.
*   ุชููู ุงูุฏุงูุฉ ุจุชุฌููุน ุนูุงุตุฑ ุงูุณูุฉ ูุชุญููููุง ุฅูู ูููููุฉ `LossDeclaration` ุงูุชู ูููุง ุจุชุญููููุง ุณุงุจูุงู.
*   ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู `localLossDeclarationService`.

---

## 4. ุงูุฎูุงุตุฉ
ูุฐู ุงูููุฑุฉ **ููุชุงุฒุฉ ูุนูููุฉ ุฌุฏุงู** ูุจูุฆุฉ ุงูุนูู ุงูุณุฑูุนุฉ (Fast-paced environment). ูู ุฃูุถู ูู ุงูุตูุญุฉ ุงููููุตูุฉ ูุนูููุงุช ุงูุฅุฏุฎุงู ุงูููููุฉ.

*   **ุงูุชูุตูุฉ:** ูุนุชูุฏ ูุฐุง ุงููุธุงู (POS Loss Mode) **ููุฅุฏุฎุงู ุงูุณุฑูุน**.
*   ููุจูู ุตูุญุฉ "ุฅุฏุงุฑุฉ ุงูุฎุณุงุฆุฑ" (ุงูุชู ุญูููุงูุง ุณุงุจูุงู) **ููุท ูููุฏูุฑ** ูููุฑุฌุนุฉุ ุงูุชุญูููุ ูุงูููุงููุฉุ ูููุณ ููุฅุฏุฎุงู.

ุจุฐูู ูุฌูุน ุจูู ุณุฑุนุฉ ุงูู POS ูููุฉ ููุญุฉ ุงูุชุญูู ุงูุฅุฏุงุฑูุฉ.
