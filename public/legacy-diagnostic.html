<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚ - Ø³Ø·ÙˆÙƒÙŠÙ‡Ø§</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            direction: rtl;
            text-align: right;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-item {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            border-left: 4px solid #ccc;
        }
        .test-pass {
            background-color: #d4edda;
            border-left-color: #28a745;
            color: #155724;
        }
        .test-fail {
            background-color: #f8d7da;
            border-left-color: #dc3545;
            color: #721c24;
        }
        .test-warning {
            background-color: #fff3cd;
            border-left-color: #ffc107;
            color: #856404;
        }
        .device-info {
            background-color: #e7f3ff;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .btn {
            background-color: #6b21a8;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .btn:hover {
            background-color: #553285;
        }
        .console-output {
            background-color: #2d3748;
            color: #fff;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©</h1>
        <p>Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ØªØ³Ø§Ø¹Ø¯ ÙÙŠ ØªØ´Ø®ÙŠØµ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ù€ iPad Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙˆØ§Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©</p>
        
        <div class="device-info" id="deviceInfo">
            <h2>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²</h2>
            <div id="deviceDetails">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        </div>

        <div>
            <h2>Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªÙˆØ§ÙÙ‚</h2>
            <div id="compatibilityTests">Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª...</div>
        </div>

        <div>
            <button class="btn" onclick="runAllTests()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</button>
            <button class="btn" onclick="testMainApp()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</button>
            <button class="btn" onclick="clearConsole()">Ù…Ø³Ø­ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„</button>
        </div>

        <div>
            <h2>Ø³Ø¬Ù„ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„</h2>
            <div class="console-output" id="consoleOutput">Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„ Ù‡Ù†Ø§...</div>
        </div>
    </div>

    <script>
        // Ø§Ø¹ØªØ±Ø§Ø¶ console.log Ù„Ø¹Ø±Ø¶Ù‡ ÙÙŠ Ø§Ù„ØµÙØ­Ø©
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        const consoleOutput = document.getElementById('consoleOutput');
        
        function addToConsole(type, ...args) {
            const timestamp = new Date().toLocaleTimeString('ar-EG');
            const message = args.map(arg => typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)).join(' ');
            consoleOutput.textContent += `[${timestamp}] ${type.toUpperCase()}: ${message}\n`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole('log', ...args);
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole('error', ...args);
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToConsole('warn', ...args);
        };
        
        function clearConsole() {
            consoleOutput.textContent = '';
        }
        
        // Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²
        function getDeviceInfo() {
            const userAgent = navigator.userAgent;
            const isIOS = /iPad|iPhone|iPod/.test(userAgent);
            const isSafari = /Safari/.test(userAgent) && !userAgent.includes('Chrome');
            
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¥ØµØ¯Ø§Ø± iOS
            let iosVersion = 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            if (isIOS) {
                const match = userAgent.match(/OS (\d+)_(\d+)/);
                if (match) {
                    iosVersion = `${match[1]}.${match[2]}`;
                }
            }
            
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¥ØµØ¯Ø§Ø± Safari
            let safariVersion = 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            if (isSafari) {
                const match = userAgent.match(/Version\/(\d+\.\d+)/);
                if (match) {
                    safariVersion = match[1];
                }
            }
            
            return {
                userAgent,
                isIOS,
                isSafari,
                iosVersion,
                safariVersion,
                screenWidth: screen.width,
                screenHeight: screen.height,
                devicePixelRatio: window.devicePixelRatio || 1,
                language: navigator.language,
                platform: navigator.platform,
                cookieEnabled: navigator.cookieEnabled,
                onLine: navigator.onLine
            };
        }
        
        // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²
        function displayDeviceInfo() {
            const info = getDeviceInfo();
            const deviceDetails = document.getElementById('deviceDetails');
            
            deviceDetails.innerHTML = `
                <strong>Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²:</strong> ${info.isIOS ? 'iOS Device' : 'Ø¬Ù‡Ø§Ø² Ø¢Ø®Ø±'}<br>
                <strong>Ø§Ù„Ù…ØªØµÙØ­:</strong> ${info.isSafari ? 'Safari' : 'Ù…ØªØµÙØ­ Ø¢Ø®Ø±'}<br>
                <strong>Ø¥ØµØ¯Ø§Ø± iOS:</strong> ${info.iosVersion}<br>
                <strong>Ø¥ØµØ¯Ø§Ø± Safari:</strong> ${info.safariVersion}<br>
                <strong>Ø¯Ù‚Ø© Ø§Ù„Ø´Ø§Ø´Ø©:</strong> ${info.screenWidth} Ã— ${info.screenHeight}<br>
                <strong>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¨ÙƒØ³Ù„:</strong> ${info.devicePixelRatio}<br>
                <strong>Ø§Ù„Ù„ØºØ©:</strong> ${info.language}<br>
                <strong>Ø§Ù„Ù…Ù†ØµØ©:</strong> ${info.platform}<br>
                <strong>Ø§Ù„ÙƒÙˆÙƒÙŠØ² Ù…ÙØ¹Ù„Ø©:</strong> ${info.cookieEnabled ? 'Ù†Ø¹Ù…' : 'Ù„Ø§'}<br>
                <strong>Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª:</strong> ${info.onLine ? 'Ù†Ø¹Ù…' : 'Ù„Ø§'}<br>
                <strong>User Agent:</strong><br><small>${info.userAgent}</small>
            `;
        }
        
        // Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªÙˆØ§ÙÙ‚
        function createTestItem(name, passed, message) {
            const className = passed ? 'test-pass' : 'test-fail';
            const icon = passed ? 'âœ…' : 'âŒ';
            return `<div class="test-item ${className}">${icon} <strong>${name}:</strong> ${message}</div>`;
        }
        
        function createWarningItem(name, message) {
            return `<div class="test-item test-warning">âš ï¸ <strong>${name}:</strong> ${message}</div>`;
        }
        
        function runCompatibilityTests() {
            const testsContainer = document.getElementById('compatibilityTests');
            let results = '';
            
            console.log('ğŸ§ª Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªÙˆØ§ÙÙ‚...');
            
            // Ø§Ø®ØªØ¨Ø§Ø± ES6 Features
            results += createTestItem('Object.assign', typeof Object.assign === 'function', 
                typeof Object.assign === 'function' ? 'Ù…Ø¯Ø¹ÙˆÙ…' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… polyfill');
            
            results += createTestItem('Array.includes', Array.prototype.includes !== undefined, 
                Array.prototype.includes !== undefined ? 'Ù…Ø¯Ø¹ÙˆÙ…' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… polyfill');
            
            results += createTestItem('String.includes', String.prototype.includes !== undefined, 
                String.prototype.includes !== undefined ? 'Ù…Ø¯Ø¹ÙˆÙ…' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… polyfill');
            
            // Ø§Ø®ØªØ¨Ø§Ø± Promise
            results += createTestItem('Promise', typeof Promise !== 'undefined', 
                typeof Promise !== 'undefined' ? 'Ù…Ø¯Ø¹ÙˆÙ…' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… polyfill');
            
            // Ø§Ø®ØªØ¨Ø§Ø± Fetch API
            results += createTestItem('Fetch API', typeof fetch !== 'undefined', 
                typeof fetch !== 'undefined' ? 'Ù…Ø¯Ø¹ÙˆÙ…' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… polyfill');
            
            // Ø§Ø®ØªØ¨Ø§Ø± URL API
            results += createTestItem('URL API', typeof URL !== 'undefined', 
                typeof URL !== 'undefined' ? 'Ù…Ø¯Ø¹ÙˆÙ…' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… polyfill');
            
            // Ø§Ø®ØªØ¨Ø§Ø± CSS Custom Properties
            const supportsCSSVariables = window.CSS && CSS.supports && CSS.supports('color', 'var(--fake-var)');
            results += createTestItem('CSS Custom Properties', supportsCSSVariables, 
                supportsCSSVariables ? 'Ù…Ø¯Ø¹ÙˆÙ…' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… polyfill');
            
            // Ø§Ø®ØªØ¨Ø§Ø± requestAnimationFrame
            results += createTestItem('requestAnimationFrame', typeof requestAnimationFrame !== 'undefined', 
                typeof requestAnimationFrame !== 'undefined' ? 'Ù…Ø¯Ø¹ÙˆÙ…' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… polyfill');
            
            // Ø§Ø®ØªØ¨Ø§Ø± IntersectionObserver
            results += createTestItem('IntersectionObserver', typeof IntersectionObserver !== 'undefined', 
                typeof IntersectionObserver !== 'undefined' ? 'Ù…Ø¯Ø¹ÙˆÙ…' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… polyfill');
            
            // Ø§Ø®ØªØ¨Ø§Ø± localStorage
            let localStorageWorking = false;
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                localStorageWorking = true;
            } catch (e) {
                console.error('localStorage test failed:', e);
            }
            results += createTestItem('localStorage', localStorageWorking, 
                localStorageWorking ? 'ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ' : 'Ù„Ø§ ÙŠØ¹Ù…Ù„ - Ù‚Ø¯ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
            
            // Ø§Ø®ØªØ¨Ø§Ø± WebSocket
            results += createTestItem('WebSocket', typeof WebSocket !== 'undefined', 
                typeof WebSocket !== 'undefined' ? 'Ù…Ø¯Ø¹ÙˆÙ…' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… - Ù‚Ø¯ ØªÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙÙˆØ±ÙŠ');
            
            // ÙØ­Øµ Ø¥ØµØ¯Ø§Ø± iOS
            const info = getDeviceInfo();
            if (info.isIOS) {
                const iosVersionNumber = parseFloat(info.iosVersion);
                if (iosVersionNumber < 12) {
                    results += createWarningItem('Ø¥ØµØ¯Ø§Ø± iOS Ù‚Ø¯ÙŠÙ…', 
                        `iOS ${info.iosVersion} Ù‚Ø¯ÙŠÙ… Ø¬Ø¯Ø§Ù‹. ÙŠÙÙ†ØµØ­ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¥Ù„Ù‰ iOS 12 Ø£Ùˆ Ø£Ø­Ø¯Ø« Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ ØªØ¬Ø±Ø¨Ø©`);
                } else if (iosVersionNumber < 13) {
                    results += createWarningItem('Ø¥ØµØ¯Ø§Ø± iOS', 
                        `iOS ${info.iosVersion} Ù‚Ø¯ÙŠÙ… Ù†Ø³Ø¨ÙŠØ§Ù‹. ØªÙ… ØªØ·Ø¨ÙŠÙ‚ polyfills Ø®Ø§ØµØ© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªÙˆØ§ÙÙ‚`);
                }
            }
            
            testsContainer.innerHTML = results;
            console.log('âœ… Ø§Ù†ØªÙ‡Øª Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªÙˆØ§ÙÙ‚');
        }
        
        function runAllTests() {
            console.log('ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª...');
            displayDeviceInfo();
            runCompatibilityTests();
        }
        
        function testMainApp() {
            console.log('ğŸš€ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ...');
            
            // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
            const testFrame = document.createElement('iframe');
            testFrame.style.display = 'none';
            testFrame.src = '/';
            
            testFrame.onload = function() {
                console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø¨Ù†Ø¬Ø§Ø­');
                document.body.removeChild(testFrame);
            };
            
            testFrame.onerror = function() {
                console.error('âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ');
                document.body.removeChild(testFrame);
            };
            
            setTimeout(() => {
                if (testFrame.parentNode) {
                    console.warn('âš ï¸ Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (10 Ø«ÙˆØ§Ù†ÙŠ)');
                    document.body.removeChild(testFrame);
                }
            }, 10000);
            
            document.body.appendChild(testFrame);
        }
        
        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“± ØµÙØ­Ø© ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚ Ø¬Ø§Ù‡Ø²Ø©');
            runAllTests();
        });
    </script>
</body>
</html> 