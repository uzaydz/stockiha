<!DOCTYPE html>
<html lang="ar" dir="rtl" class="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- تحسينات للتطبيق المكتبي -->
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />

    <title id="page-title">سطوكيها - منصة إدارة المتاجر الذكية | نقطة البيع والمتجر الإلكتروني</title>
    <meta name="description" content="سطوكيها - منصة شاملة لإدارة المتاجر تجمع بين نقطة البيع والمتجر الإلكتروني وإدارة المخزون. ابدأ مجاناً اليوم! نظام POS متكامل، إدارة المخزون، التقارير المالية، وأكثر." />
    <meta name="author" content="سطوكيها - منصة إدارة المتاجر" />
    <meta name="keywords" content="إدارة متجر، نقطة بيع، متجر إلكتروني، POS، إدارة مخزون، سطوكيها، منصة تجارة إلكترونية، نظام نقاط البيع، إدارة المبيعات، التقارير المالية، الجزائر، التجارة الإلكترونية، منصة SaaS" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    <meta name="language" content="Arabic" />
    <meta name="revisit-after" content="1 days" />
    <meta name="rating" content="general" />
    <meta name="distribution" content="global" />
    <meta name="geo.region" content="DZ" />
    <meta name="geo.country" content="Algeria" />
    <meta name="geo.placename" content="Algeria" />
    <meta name="ICBM" content="28.0339, 1.6596" />
    <meta name="DC.title" content="سطوكيها - منصة إدارة المتاجر الذكية" />
    <meta name="DC.creator" content="سطوكيها" />
    <meta name="DC.subject" content="إدارة المتاجر، نقطة البيع، التجارة الإلكترونية" />
    <meta name="DC.description" content="منصة شاملة لإدارة المتاجر تجمع بين نقطة البيع والمتجر الإلكتروني وإدارة المخزون" />
    <meta name="DC.publisher" content="سطوكيها" />
    <meta name="DC.contributor" content="سطوكيها" />
    <meta name="DC.date" content="2024-01-15" />
    <meta name="DC.type" content="Software" />
    <meta name="DC.format" content="text/html" />
    <meta name="DC.identifier" content="https://stockiha.com" />
    <meta name="DC.language" content="ar" />
    <meta name="DC.rights" content="© 2024 سطوكيها. جميع الحقوق محفوظة." />
    <meta name="DC.coverage" content="Algeria" />
    <meta name="DC.audience" content="التجار، أصحاب المتاجر، رواد الأعمال" />
    
    <!-- Removed store-related scripts - admin only -->
    
    <!-- Favicon for main platform -->
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    <link rel="apple-touch-icon" href="./apple-touch-icon.png">
    <link rel="shortcut icon" href="./favicon.ico">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Additional Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="192x192" href="./icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="./icon-512x512.png">
    
    <!-- 🚀 تحميل الخطوط المحلية محسن للأداء - استخدام preload مع font-display -->
    <link rel="preload" href="./fonts/tajawal-regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <!-- تحميل الخطوط الإضافية عند الحاجة فقط -->
    <link rel="prefetch" href="./fonts/tajawal-medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="prefetch" href="./fonts/tajawal-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    
    <!-- تحميل CSS الرئيسي - ضروري للتطبيق -->
    <link rel="stylesheet" href="./src/index.css">
    
    <!-- تحسين إضافي: تحميل الخطوط الإضافية عند الحاجة -->
    <script nonce="{{CSP_NONCE}}">
      // Smart font loading strategy - محسن لتجنب التحميل المتكرر
      (function() {
        // تحقق من وجود الخطوط في الكاش
        var fontsAlreadyLoaded = sessionStorage.getItem('fonts_loaded');

        if (fontsAlreadyLoaded === 'true') {
          console.log('Fonts already preloaded, skipping...');
          return;
        }

        var fontsLoaded = false;

        // Function to load additional fonts
        function loadAdditionalFonts() {
          if (fontsLoaded) return;
          fontsLoaded = true;

          // تحميل الخطوط الإضافية عند الحاجة فقط
          var fontsBase = './fonts/';
          var additionalFonts = [
            fontsBase + 'tajawal-medium.woff2',
            fontsBase + 'tajawal-bold.woff2'
          ];

          additionalFonts.forEach(function(fontUrl) {
            var link = document.createElement('link');
            link.rel = 'prefetch';
            link.as = 'font';
            link.type = 'font/woff2';
            link.crossOrigin = 'anonymous';
            link.href = fontUrl;
            document.head.appendChild(link);
          });

          // حفظ في sessionStorage لتجنب التحميل المتكرر
          sessionStorage.setItem('fonts_loaded', 'true');
          console.log('Fonts preloaded and cached for session');
        }

        // Load additional fonts on user interaction or after delay
        var events = ['mousedown', 'touchstart', 'keydown', 'wheel'];
        events.forEach(function(event) {
          document.addEventListener(event, loadAdditionalFonts, { once: true, passive: true });
        });

        // Fallback: load after 1 second if no interaction (أقل من 2s)
        setTimeout(loadAdditionalFonts, 1000);
      })();
    </script>
    
    <!-- إضافة سكريبت للتعامل مع وضع الإضاءة -->
    <script nonce="{{CSP_NONCE}}">
      // حاول تطبيق الوضع المحفوظ قبل تحميل الصفحة لمنع وميض الشاشة
      const storedTheme = localStorage.getItem('theme') || 'light';
      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      const initialTheme = storedTheme === 'system' ? systemTheme : storedTheme;
      document.documentElement.classList.add(initialTheme);
      document.documentElement.style.colorScheme = initialTheme;
    </script>
    
    <!-- 🚀 Resource Hints محسنة للأداء -->
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//api.vercel.com">
    
    <!-- 🚀 Preconnect للموارد الحرجة -->
    <link rel="preconnect" href="https://wrnssatuvmumsczyldth.supabase.co" crossorigin>
    
    <!-- إعدادات JavaScript الأساسية -->
    <script nonce="{{CSP_NONCE}}">
      // إعدادات أساسية للأداء
      window.process = window.process || { env: {} };
      window.global = window.global || window;
      
      // تحسين أداء الخطوط
      if ('fonts' in document) {
        document.fonts.ready.then(() => {
          document.documentElement.classList.add('fonts-loaded');
        });
      }
    </script>
    
    <!-- 🎯 تحسين تحميل الموارد - إزالة preload غير الضروري -->
    <!-- تم إزالة preload للملفات التي يتم تحميلها بواسطة Vite تلقائياً -->
    
    <!-- ❌ إزالة Google Fonts: نعتمد على الخطوط المحلية فقط للأداء -->
    
    <!-- 🚀 Critical CSS will be loaded via React imports -->
    
    <!-- 🚀 CRITICAL CSS INLINE (مصغّر جداً: الأساسيات واللودر فقط) -->
    <style>
      html {
        font-family: 'Tajawal', 'Arial Unicode MS', 'Tahoma', 'Arial', sans-serif;
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      body {
        margin: 0;
        padding: 0;
        direction: rtl;
        text-align: right;
        min-height: 100vh;
        background: #ffffff;
        color: #000000;
        overflow-x: hidden;
      }
      #root { min-height: 100vh; }
      .loading-container {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999;
        padding: 1rem;
        border-radius: 0.5rem;
        background: #ffffff;
      }
      .loading-spinner {
        width: 32px;
        height: 32px;
        border: 2px solid #e5e7eb;
        border-top-color: #6b21a8;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }
      @keyframes spin { to { transform: rotate(360deg); } }
      * { box-sizing: border-box; }
    </style>
    
    <!-- 🚀 تحميل CSS محسن - تم تبسيطه -->

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="سطوكيها - منصة إدارة المتاجر الذكية | نقطة البيع والمتجر الإلكتروني" />
    <meta property="og:description" content="منصة شاملة لإدارة المتاجر تجمع بين نقطة البيع والمتجر الإلكتروني وإدارة المخزون. نظام POS متكامل، إدارة المخزون، التقارير المالية. ابدأ مجاناً اليوم!" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://stockiha.com" />
    <meta property="og:image" content="https://stockiha.com/images/stockiha-og-image.webp" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="سطوكيها - منصة إدارة المتاجر الذكية" />
    <meta property="og:site_name" content="سطوكيها" />
    <meta property="og:locale" content="ar_DZ" />
    <meta property="og:locale:alternate" content="en_US" />
    <meta property="og:updated_time" content="2024-01-15T00:00:00+01:00" />
    <meta property="article:author" content="سطوكيها" />
    <meta property="article:publisher" content="سطوكيها" />
    <meta property="article:section" content="Technology" />
    <meta property="article:tag" content="إدارة المتاجر" />
    <meta property="article:tag" content="نقطة البيع" />
    <meta property="article:tag" content="المتجر الإلكتروني" />
    <meta property="article:tag" content="إدارة المخزون" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@stockiha" />
    <meta name="twitter:creator" content="@stockiha" />
    <meta name="twitter:title" content="سطوكيها - منصة إدارة المتاجر الذكية" />
    <meta name="twitter:description" content="منصة شاملة لإدارة المتاجر تجمع بين نقطة البيع والمتجر الإلكتروني وإدارة المخزون. ابدأ مجاناً اليوم!" />
    <meta name="twitter:image" content="https://stockiha.com/images/stockiha-twitter-card.webp" />
    <meta name="twitter:image:alt" content="سطوكيها - منصة إدارة المتاجر الذكية" />
    <meta name="twitter:domain" content="stockiha.com" />
    <meta name="twitter:url" content="https://stockiha.com" />

    <!-- Additional SEO Meta Tags -->
    <meta name="application-name" content="سطوكيها" />
    <meta name="apple-mobile-web-app-title" content="سطوكيها" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="msapplication-TileColor" content="#6b21a8" />
    <meta name="msapplication-config" content="./browserconfig.xml" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://stockiha.com" />
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "سطوكيها - منصة إدارة المتاجر الذكية",
      "alternateName": "Stockiha",
      "description": "منصة شاملة لإدارة المتاجر تجمع بين نقطة البيع والمتجر الإلكتروني وإدارة المخزون. نظام POS متكامل، إدارة المخزون، التقارير المالية، وأكثر.",
      "url": "https://stockiha.com",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "Web",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "softwareVersion": "2.0",
      "datePublished": "2024-01-15",
      "dateModified": "2024-01-15",
      "inLanguage": "ar",
      "isAccessibleForFree": true,
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "DZD",
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-15"
      },
      "creator": {
        "@type": "Organization",
        "name": "سطوكيها",
        "url": "https://stockiha.com",
        "logo": "https://stockiha.com/images/logo-new.webp",
        "address": {
          "@type": "PostalAddress",
          "addressCountry": "DZ",
          "addressRegion": "Algeria"
        }
      },
      "featureList": [
        "نقطة البيع المتقدمة",
        "المتجر الإلكتروني الاحترافي", 
        "إدارة المخزون الذكية",
        "إدارة المبيعات الشاملة",
        "التقارير المالية التفصيلية",
        "إدارة العملاء",
        "نظام الطلبات",
        "التكامل مع وسائل الدفع",
        "التقارير التحليلية",
        "إدارة الموردين"
      ],
      "screenshot": "https://stockiha.com/images/dashboard-screenshot.webp",
      "softwareHelp": "https://stockiha.com/docs",
      "support": {
        "@type": "ContactPoint",
        "contactType": "customer service",
        "availableLanguage": "Arabic"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "سطوكيها",
      "alternateName": "Stockiha",
      "url": "https://stockiha.com",
      "logo": "https://stockiha.com/images/logo-new.webp",
      "description": "منصة شاملة لإدارة المتاجر تجمع بين نقطة البيع والمتجر الإلكتروني وإدارة المخزون",
      "foundingDate": "2024",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "DZ",
        "addressRegion": "Algeria"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "customer service",
        "availableLanguage": "Arabic"
      },
      "sameAs": [
        "https://twitter.com/stockiha",
        "https://facebook.com/stockiha",
        "https://linkedin.com/company/stockiha"
      ],
      "knowsAbout": [
        "إدارة المتاجر",
        "نقطة البيع",
        "المتجر الإلكتروني",
        "إدارة المخزون",
        "التجارة الإلكترونية"
      ]
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "سطوكيها",
      "url": "https://stockiha.com",
      "description": "منصة شاملة لإدارة المتاجر تجمع بين نقطة البيع والمتجر الإلكتروني وإدارة المخزون",
      "inLanguage": "ar",
      "isAccessibleForFree": true,
      "publisher": {
        "@type": "Organization",
        "name": "سطوكيها",
        "url": "https://stockiha.com"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://stockiha.com/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "الرئيسية",
          "item": "https://stockiha.com"
        }
      ]
    }
    </script>
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#6b21a8">
    
    <!-- مخصص لـ Vercel و SPA -->
    <meta name="vercel-deployment" content="true">
    <meta name="format-detection" content="telephone=no">
  </head>

  <body>
    <div id="root"></div>

    <!-- 🚀 إزالة loading screen تماماً لصفحة الهبوط - تحميل فوري -->
    <script nonce="{{CSP_NONCE}}">
      // دالة وهمية للتوافق - لا نحتاج لها في صفحة الهبوط
      window.removeInitialLoading = function() {
        // لا يوجد شيء لإزالته - صفحة الهبوط تحمل فوراً
      };
    </script>
    
    <!-- Dynamic Application Entry: main vs store-main (dev) -->
    <script type="module">
      (function() {
        const host = location.hostname || '';
        const parts = host.split('.');
        // Simplified for admin-only site

        const entry = './src/main.tsx';
        const loadDefaultEntry = () => import('./src/main.tsx');
        const loadEntry = loadDefaultEntry;

        // Debug logs for entry choice
        try {
          console.log('[ENTRY] chosenEntry =', entry);
        } catch {}

        // ملاحظة: document.currentScript قد يكون null في inline module scripts
        // لذا نستخدم dynamic import لضمان العمل في التطوير والإنتاج
        try {
          // Load main entry point
          (window).__ENTRY_CHOSEN__ = entry;
          (window).__STORE_ENTRY__ = false; // Admin only
          // Set platform title
          try { if (!document.title || document.title === 'متجر إلكتروني') document.title = 'سطوكيها'; } catch {}
          loadEntry();
        } catch (e) {
          console.error('[ENTRY] فشل تحميل نقطة الدخول:', entry, e);
        }
      })();
    </script>


  </body>
</html>
