# ุชุญููู ูุดุงูู ุงููุงุด ูุงููุตุงุฏูุฉ ุงููุชุนุฏุฏุฉ

## ๐ ุงููุดุงูู ุงูููุชุดูุฉ

### 1. ูุดููุฉ ุชุนุฏุฏ Supabase Clients
```
Multiple GoTrueClient instances detected in the same browser context
```

**ุงูุณุจุจ**: ูุฌูุฏ ุนุฏุฉ ูููุงุช ุชูุดุฆ instances ูุฎุชููุฉ ูู Supabase:
- `src/lib/supabase.ts` (ุงูุฑุฆูุณู)
- `src/lib/supabase-simple.ts` 
- `src/lib/supabase-admin.ts`
- `src/lib/supabase-client.ts`

### 2. ูุดููุฉ Cross-Domain Authentication
```
๐ [CrossDomain] ุงูุชูุฌูู ุฅูู: http://lomanfinal.localhost:8080/dashboard
```

**ุงูุณุจุจ**: ุงูููู ุจูู `localhost:5173` ู `lomanfinal.localhost:8080` ูุฎูู ุชุถุงุฑุจ ูู ุงูุฌูุณุงุช.

### 3. ูุดููุฉ timeout ูู ุชุญููู ุงููุคุณุณุฉ
```
ุงูุชูุช ูููุฉ ุชุญููู ุจูุงูุงุช ุงููุคุณุณุฉ
ุฎุทุฃ ูู ุชุญููู ุจูุงูุงุช ุงููุคุณุณุฉ: Error: ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ุงููุคุณุณุฉ
```

**ุงูุณุจุจ**: ุงุณุชุนูุงูุงุช ูุชุนุฏุฏุฉ ูุชุฒุงููุฉ + ูุดุงูู ูู ุงููุงุด.

### 4. ูุดููุฉ ุชูุฑุงุฑ ุชุทุจูู ุงูุซูู
```
๐ [applyInstantTheme] ุชู ุชุฌุงูู ุชุทุจูู ุงูุซูู ุงููุชูุฑุฑ
```

**ุงูุณุจุจ**: ุชุทุจูู ุงูุซูู ุฃูุซุฑ ูู ูุฑุฉ ุฃุซูุงุก ุงูุชูุงูุงุช ุงูุตูุญุฉ.

## ๐๏ธ ุงูุญููู ุงููุทุฑูุญุฉ

### 1. ุชูุญูุฏ Supabase Clients

**ุงููุดููุฉ**: ุนุฏุฉ ูููุงุช ุชูุดุฆ clients ูููุตูุฉ
**ุงูุญู**: ุงุณุชุฎุฏุงู ููู ูุงุญุฏ ููุท ูุญุฐู ุงูุจุงูู

### 2. ุฅุตูุงุญ Cross-Domain Auth

**ุงููุดููุฉ**: ุชุถุงุฑุจ ูู ููู ุงูุฌูุณุงุช
**ุงูุญู**: ุชุญุณูู ุขููุฉ ููู ุงูุฌูุณุฉ ูุชูุธูู ุงูุชุฎุฒูู ุงููุคูุช

### 3. ุชุญุณูู ุชุญููู ุจูุงูุงุช ุงููุคุณุณุฉ

**ุงููุดููุฉ**: ุงุณุชุนูุงูุงุช ูุชุนุฏุฏุฉ ูtimeouts
**ุงูุญู**: debounceุ caching ูุญุณูุ ูุฅุนุงุฏุฉ ูุญุงููุฉ ุฐููุฉ

### 4. ุฅุตูุงุญ ุชุฏุงุฎู ุงูุซูู

**ุงููุดููุฉ**: ุชุทุจูู ุงูุซูู ูุชุนุฏุฏ
**ุงูุญู**: ุญูุงูุฉ ูู ุงูุชุทุจูู ุงููุชุนุฏุฏ ูุชูุธูู ุงูุฃุญุฏุงุซ

## ๐ ุฎุทุฉ ุงูุชูููุฐ

### ุงููุฑุญูุฉ 1: ุชูุธูู Supabase Clients
1. โ ุชูุญูุฏ ุฌููุน imports ุฅูู `src/lib/supabase.ts`
2. โ ุญุฐู/ุฅุนุงุฏุฉ ุชุณููุฉ ุงููููุงุช ุงููุชุนุงุฑุถุฉ
3. โ ุชุญุฏูุซ ุฌููุน ุงููุฑุงุฌุน

### ุงููุฑุญูุฉ 2: ุฅุตูุงุญ Cross-Domain Auth
1. โ ุชุญุณูู `cross-domain-auth.ts`
2. โ ุฅุถุงูุฉ ุชูุธูู ุฃูุถู ููุชุฎุฒูู ุงููุคูุช
3. โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุงููุฑุญูุฉ 3: ุชุญุณูู Context Management
1. โ ุฅุถุงูุฉ debouncing ูู TenantContext
2. โ ุชุญุณูู error handling ูretry logic
3. โ ุชุญุณูู caching strategy

### ุงููุฑุญูุฉ 4: ุฅุตูุงุญ Theme Management
1. โ ุฅุถุงูุฉ ุญูุงูุฉ ูู ุงูุชุทุจูู ุงููุชุนุฏุฏ
2. โ ุชูุธูู event listeners
3. โ ุชุญุณูู timing

## ๐ ุงูุญููู ุงููุทุจูุฉ

### 1. Supabase Client Consolidation
- ุชูุญูุฏ ุฌููุน ุงูู clients ูู ููู ูุงุญุฏ
- ุฅุฒุงูุฉ ุงูุชุถุงุฑุจ ุจูู instances ูุฎุชููุฉ
- ุชุญุณูู ุฅุนุฏุงุฏุงุช ุงููุตุงุฏูุฉ

### 2. Cache Management Enhancement  
- ุฅุถุงูุฉ timeout protection
- ุชุญุณูู ุขููุฉ ุงูุชูุธูู
- ุฅุถุงูุฉ fallback mechanisms

### 3. Cross-Domain Session Transfer
- ุชุญุณูู ููู ุงูุฌูุณุฉ ุจูู ุงููุทุงูุงุช
- ุฅุถุงูุฉ validation ุฅุถุงููุฉ
- ุชุญุณูู error recovery

### 4. Context Loading Optimization
- ุฅุถุงูุฉ debouncing ููุญุฏ ูู ุงูุทูุจุงุช ุงููุชุนุฏุฏุฉ
- ุชุญุณูู retry logic
- ุฅุถุงูุฉ timeout handling

## ๐ง ูููุงุช ูุทููุจ ุชุนุฏูููุง

### ุงููููุงุช ุงูุฑุฆูุณูุฉ:
1. `src/lib/supabase.ts` - โ Client ุงูุฑุฆูุณู
2. `src/context/TenantContext.tsx` - โ ุฅุตูุงุญ loading logic
3. `src/context/AuthContext.tsx` - โ ุชุญุณูู ุงููุตุงุฏูุฉ
4. `src/lib/cross-domain-auth.ts` - โ ุฅุตูุงุญ cross-domain
5. `src/lib/theme/themeManager.ts` - โ ุฅุตูุงุญ ุงูุซูู

### ุงููููุงุช ุงููุทููุจ ุญุฐููุง/ุฅุนุงุฏุฉ ุชุณููุชูุง:
1. `src/lib/supabase-simple.ts` โ `src/lib/supabase-simple.ts.backup`
2. `src/lib/supabase-old.ts.backup` โ ุญุฐู
3. ุชูุธูู imports ูู ูููุงุช ุฃุฎุฑู

## ๐ ูุคุดุฑุงุช ุงููุฌุงุญ

### ูุจู ุงูุฅุตูุงุญ:
- โ ุชุนุฏุฏ GoTrueClient instances
- โ Timeout ูู ุชุญููู ุงููุคุณุณุฉ  
- โ Cross-domain session failures
- โ ุชูุฑุงุฑ ุชุทุจูู ุงูุซูู
- โ ุญุงุฌุฉ ููุชุญ profile/ูุชุตูุญ ุฌุฏูุฏ

### ุจุนุฏ ุงูุฅุตูุงุญ:
- โ Client ูุงุญุฏ ููุท
- โ ุชุญููู ุณุฑูุน ูููุคุณุณุฉ
- โ ููู ุฌูุณุฉ ุณูุณ
- โ ุชุทุจูู ุซูู ูุฑุฉ ูุงุญุฏุฉ
- โ ุนูู ุณูุณ ุจุฏูู ุฅุนุงุฏุฉ ูุชุญ

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุชุทุจูู ุงูุฅุตูุงุญุงุช**: ุชูููุฐ ุฌููุน ุงูุญููู ุงูููุชุฑุญุฉ
2. **ุงุฎุชุจุงุฑ ุดุงูู**: ุงุฎุชุจุงุฑ ุฌููุน scenarios
3. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**: ูุชุงุจุนุฉ ุงูู console logs
4. **ุชุญุณูู ุชุฏุฑูุฌู**: ุฅุถุงูุฉ ุชุญุณููุงุช ุฅุถุงููุฉ ุญุณุจ ุงูุญุงุฌุฉ

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ**: ุฃุฎุฐ backup ูุจู ุชุทุจูู ุงูุชุบููุฑุงุช
2. **ุงูุงุฎุชุจุงุฑ ุงูุชุฏุฑูุฌู**: ุงุฎุชุจุงุฑ ูู ุฅุตูุงุญ ุนูู ุญุฏุฉ
3. **ูุฑุงูุจุฉ ุงูุฃุฎุทุงุก**: ูุชุงุจุนุฉ console ูSentry logs
4. **ุงูุชูุซูู**: ุชูุซูู ุฃู ุชุบููุฑุงุช ุฅุถุงููุฉ

## ๐ ุฎุทุฉ ุงูุงุณุชุนุงุฏุฉ

ูู ุญุงูุฉ ูุดู ุงูุฅุตูุงุญุงุช:
1. ุงุณุชุนุงุฏุฉ ุงููููุงุช ูู backup
2. ุฅุนุงุฏุฉ ุชุดุบูู dev server
3. ูุณุญ localStorage ูsessionStorage
4. ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ุจู hard refresh

## ๐ ุงูุฏุนู ุงูููู

ูู ุญุงูุฉ ุงุณุชูุฑุงุฑ ุงููุดุงูู:
1. ุชุญูู ูู console errors
2. ุชุญูู ูู network requests
3. ุชุญูู ูู localStorage/sessionStorage
4. ุฃุนุฏ ุชุดุบูู dev server ูุน `npm run dev --force` 