/* تحسينات أداء DesktopTitlebar - محسّن للسرعة */

/* جعل أي عنصر يحمل data-tauri-drag-region قابلاً للسحب افتراضياً */
.desktop-titlebar,
.desktop-titlebar [data-tauri-drag-region="true"] {
  -webkit-app-region: drag;
  app-region: drag;
}

/* مناطق يجب منع السحب فيها صراحة */
.desktop-titlebar [data-tauri-drag-region="false"] {
  -webkit-app-region: no-drag !important;
  app-region: no-drag !important;
}

/* Titlebar الرئيسي */
.desktop-titlebar {
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
}

/* التأكد من أن الأزرار قابلة للنقر وتمنع السحب */
.desktop-titlebar button,
.desktop-titlebar [role="button"],
.desktop-titlebar a,
.desktop-titlebar input,
.desktop-titlebar select {
  pointer-events: auto !important;
  position: relative;
  z-index: 20;
  -webkit-app-region: no-drag !important;
  app-region: no-drag !important;
}

/* التأكد من أن القوائم المنسدلة تعمل */
.desktop-titlebar [data-radix-popper-content-wrapper],
[data-radix-popper-content-wrapper],
[data-radix-menu-content],
[data-radix-popover-content],
[data-radix-dialog-overlay],
[data-radix-dialog-content] {
  pointer-events: auto !important;
  z-index: 9999 !important;
  -webkit-app-region: no-drag !important;
  app-region: no-drag !important;
}

/* التأكد من أن القوائم المنسدلة المخصصة تعمل */
.desktop-titlebar .absolute {
  pointer-events: auto !important;
  -webkit-app-region: no-drag !important;
  app-region: no-drag !important;
}

/* منع السحب من العناصر التفاعلية */
.desktop-titlebar [data-no-drag],
.desktop-titlebar [data-no-drag] * {
  -webkit-app-region: no-drag !important;
  app-region: no-drag !important;
}

/* تحسين أداء نظام التبديل بين الأزرار */
.desktop-titlebar [class*="transition-all"] {
  /* إزالة will-change لمنع الرمشة */
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* تحسين أداء الأزرار */
.desktop-titlebar button {
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
}

/* تحسين الانتقالات */
.desktop-titlebar button,
.desktop-titlebar a {
  transition: background-color 0.15s ease, color 0.15s ease;
}

/* تقليل الحركة للمستخدمين الذين يفضلون ذلك */
@media (prefers-reduced-motion: reduce) {
  .desktop-titlebar button,
  .desktop-titlebar a {
    transition: none !important;
  }
}

/* تحسين الأداء على الأجهزة المحمولة */
@media (max-width: 768px) {
  .desktop-titlebar button {
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
}
