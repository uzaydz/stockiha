<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø£ÙÙ‚ÙŠØ©</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            direction: rtl;
        }
    </style>
</head>
<body>
    <h1>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø£ÙÙ‚ÙŠØ©</h1>
    
    <div class="note">
        <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙŠØ¬Ø±Ø¨ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø£ÙÙ‚ÙŠØ© Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ø§ ÙŠØ¯ÙˆØ± 90 Ø¯Ø±Ø¬Ø©
    </div>
    
    <button class="test-button" onclick="testPortraitPrint()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠØ©</button>
    <button class="test-button" onclick="testLandscapePrint()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø£ÙÙ‚ÙŠØ©</button>
    
    <script type="module">
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
        const testBarcodeData = {
            barcodeImageUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iNTAiIGZpbGw9IndoaXRlIi8+PGcgZmlsbD0iYmxhY2siPjxyZWN0IHg9IjEwIiB5PSI1IiB3aWR0aD0iMiIgaGVpZ2h0PSI0MCIvPjxyZWN0IHg9IjE0IiB5PSI1IiB3aWR0aD0iMSIgaGVpZ2h0PSI0MCIvPjxyZWN0IHg9IjE3IiB5PSI1IiB3aWR0aD0iMyIgaGVpZ2h0PSI0MCIvPjxyZWN0IHg9IjIyIiB5PSI1IiB3aWR0aD0iMSIgaGVpZ2h0PSI0MCIvPjx0ZXh0IHg9IjEwMCIgeT0iNDciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiI+MTIzNDU2Nzg5MDwvdGV4dD48L2c+PC9zdmc+',
            value: '1234567890',
            productName: 'Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±',
            price: 29.99
        };

        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© (Ù…Ø­Ø§ÙƒØ§Ø©)
        function createPrintWindow(content, title, orientation) {
            const printWindow = window.open('', '_blank', 'width=800,height=600');
            
            if (!printWindow) {
                alert('ØªÙ… Ù…Ù†Ø¹ ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©');
                return null;
            }

            const pageSize = orientation === 'landscape' ? '297mm 210mm' : '210mm 297mm';
            const html = \`
                <!DOCTYPE html>
                <html dir="rtl" lang="ar">
                <head>
                    <meta charset="UTF-8">
                    <title> \${title} </title>
                    <style>
                        @media print {
                            @page {
                                size: \${pageSize};
                                margin: 0;
                            }
                            
                            html, body {
                                margin: 0 !important;
                                padding: 0 !important;
                                font-family: Arial, sans-serif !important;
                                -webkit-print-color-adjust: exact !important;
                                color-adjust: exact !important;
                            }
                            
                            .print-container {
                                width: 100%;
                                height: 100vh;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                padding: 10mm;
                                box-sizing: border-box;
                            }
                            
                            .barcode-content {
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                justify-content: center;
                                text-align: center;
                                width: 80%;
                                height: 80%;
                                gap: 5mm;
                            }
                            
                            .product-name {
                                font-size: 12px;
                                font-weight: bold;
                                margin-bottom: 2mm;
                            }
                            
                            .barcode-image {
                                max-width: 100%;
                                max-height: 60%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                            }
                            
                            .barcode-image img {
                                max-width: 100%;
                                max-height: 100%;
                                width: auto;
                                height: auto;
                            }
                            
                            .price {
                                font-size: 12px;
                                font-weight: bold;
                                margin-top: 2mm;
                            }
                            
                            .print-controls {
                                display: none !important;
                            }
                        }
                        
                        @media screen {
                            .print-container {
                                min-height: 100vh;
                                background: #f5f5f5;
                                padding: 20px;
                            }
                            
                            .barcode-content {
                                background: white;
                                border: 2px solid #333;
                                border-radius: 8px;
                                padding: 20px;
                                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                                max-width: 400px;
                                margin: 0 auto;
                            }
                            
                            .print-controls {
                                position: fixed;
                                top: 20px;
                                right: 20px;
                                background: rgba(255,255,255,0.95);
                                padding: 15px;
                                border-radius: 8px;
                                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                                border: 1px solid #ddd;
                            }
                            
                            .print-button {
                                background: #28a745;
                                color: white;
                                border: none;
                                padding: 10px 20px;
                                border-radius: 5px;
                                cursor: pointer;
                                margin: 5px;
                                font-size: 14px;
                            }
                            
                            .close-button {
                                background: #dc3545;
                                color: white;
                                border: none;
                                padding: 10px 20px;
                                border-radius: 5px;
                                cursor: pointer;
                                margin: 5px;
                                font-size: 14px;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div class="print-controls">
                        <div style="margin-bottom: 10px; font-weight: bold;">Ø§Ù„Ø§ØªØ¬Ø§Ù‡: \${orientation === 'landscape' ? 'Ø£ÙÙ‚ÙŠ' : 'Ø¹Ù…ÙˆØ¯ÙŠ'}</div>
                        <button class="print-button" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
                        <button class="close-button" onclick="window.close()">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
                    </div>
                    
                    <div class="print-container">
                        \${content}
                    </div>
                    
                    <script>
                        window.addEventListener('load', function() {
                            window.focus();
                        });
                        
                        window.addEventListener('keydown', function(e) {
                            if (e.ctrlKey && e.key === 'p') {
                                e.preventDefault();
                                window.print();
                            }
                            if (e.key === 'Escape') {
                                window.close();
                            }
                        });
                    </script>
                </body>
                </html>
            \`;

            printWindow.document.write(html);
            printWindow.document.close();
            
            return printWindow;
        }

        function generateBarcodeContent(data) {
            return \`
                <div class="barcode-content">
                    <div class="product-name">\${data.productName}</div>
                    <div class="barcode-image">
                        <img src="\${data.barcodeImageUrl}" alt="Ø¨Ø§Ø±ÙƒÙˆØ¯ \${data.value}" />
                    </div>
                    <div class="price">\${data.price.toLocaleString()} Ø¯Ø¬</div>
                </div>
            \`;
        }

        // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¯ÙˆØ§Ù„ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ø§Ù…
        window.testPortraitPrint = function() {
            const content = generateBarcodeContent(testBarcodeData);
            createPrintWindow(content, 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠØ©', 'portrait');
        };

        window.testLandscapePrint = function() {
            const content = generateBarcodeContent(testBarcodeData);
            createPrintWindow(content, 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø£ÙÙ‚ÙŠØ©', 'landscape');
        };
    </script>
</body>
</html> 