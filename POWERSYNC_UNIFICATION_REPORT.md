# ๐ ุชูุฑูุฑ ุชูุญูุฏ PowerSync - ุงููุธุงู ุจุงููุงูู

## โ ุงูุญุงูุฉ ุงูุญุงููุฉ

### ุงููููุงุช ุงูุชู ุชุณุชุฎุฏู PowerSync ุจุงููุนู โ

1. **`src/services/DeltaWriteService.ts`** โ
   - ูุณุชุฎุฏู `powerSyncService` ุจุงููุงูู
   - ุฌููุน ุนูููุงุช CRUD ุชุณุชุฎุฏู PowerSync

2. **`src/api/localPosOrderService.ts`** โ
   - ูุณุชุฎุฏู `powerSyncService` ุจุงููุงูู
   - ุฌููุน ุนูููุงุช ุงูุทูุจูุงุช ุชุณุชุฎุฏู PowerSync
   - ุชู ุฅุฒุงูุฉ ุฌููุน ุงุณุชุฏุนุงุกุงุช `sqliteWriteQueue` (ูุนุฑูุถุฉ ูุชุนูููุงุช TODO)

3. **`src/services/LocalProductSearchService.ts`** โ
   - ูุณุชุฎุฏู `powerSyncService` ุจุงููุงูู
   - ุฌููุน ุนูููุงุช ุงูุจุญุซ ุชุณุชุฎุฏู PowerSync

4. **`src/lib/powersync/PowerSyncService.ts`** โ
   - ุงูุฎุฏูุฉ ุงูุฑุฆูุณูุฉ ูู PowerSync
   - ุชุฏุนู ุฌููุน ุงูุนูููุงุช: `execute`, `getAll`, `get`, `writeTransaction`

5. **`src/hooks/useUnifiedPOSData.ts`** โ
   - ูุณุชุฎุฏู `DeltaWriteService` (ุงูุฐู ูุณุชุฎุฏู PowerSync)
   - ุฌููุน ุนูููุงุช ุชุญููู ุงูุจูุงูุงุช ุชุณุชุฎุฏู PowerSync

### ุงููููุงุช ุงูุชู ุชู ุชุญููููุง ุงูุขู โ

1. **`src/scripts/cleanupWorkSessionsOutbox.ts`** โ
   - ุชู ุชุญูููู ูู `tauriSqlClient` ุฅูู `powerSyncService`
   - ุฌููุน ุงูุงุณุชุนูุงูุงุช ุชุณุชุฎุฏู PowerSync ุงูุขู

2. **`src/components/comprehensive-reports/hooks/useReportData.ts`** โ
   - ุชู ุชุญููู ุฏุงูุฉ `fetchProducts` ูู `tauriQuery` ุฅูู `powerSyncService.getAll`
   - ุฌููุน ุงุณุชุนูุงูุงุช ุงูููุชุฌุงุช ูุงูุฃููุงู ูุงูููุงุณุงุช ุชุณุชุฎุฏู PowerSync ุงูุขู

### ุงููููุงุช ุงููุฏููุฉ (ุบูุฑ ูุดุทุฉ) โ๏ธ

ูุฐู ุงููููุงุช ุชุญุชูู ุนูู `.old` ูู ุงูุงุณู ุฃู ูู ูุฌูุฏ `sync.old`:
- `src/services/DeltaWriteService.old.ts`
- `src/lib/db/sqliteAPI.old.ts`
- `src/lib/sync.old/**/*` (ุฌููุน ุงููููุงุช ูู ูุฐุง ุงููุฌูุฏ)
- `src/services/AdvancedInventoryService.old.ts`
- `src/services/PrintHistoryService.old.ts`
- `src/services/PrintSettingsService.old.ts`
- `src/api/comprehensiveSyncService.old.ts`

**ููุงุญุธุฉ**: ูุฐู ุงููููุงุช ุบูุฑ ูุณุชุฎุฏูุฉ ููููู ุญุฐููุง ูุงุญูุงู.

### ุงููููุงุช ุงูุชู ุชุญุชุงุฌ ุฅูู ูุญุต ๐

1. **`src/lib/db/WriteQueue.ts`**
   - ูุง ููุฌุฏ ุงุณุชุฎุฏุงู ูุดุท ููุฐุง ุงูููู ูู ุงูููุฏ ุงููุดุท
   - ููุท ูุณุชุฎุฏู ูู ูููุงุช migration ูุฏููุฉ
   - **ุงูุญุงูุฉ**: ูููู ุฅุฒุงูุชู ุฃู ุชุฑูู ููุชูุงูููุฉ

2. **`src/lib/db/tauriSchema.ts`**
   - ูุง ููุฌุฏ ุงุณุชุฎุฏุงู ูุดุท ููุฐุง ุงูููู
   - ููุท ูุณุชุฎุฏู ูู `sqliteAPI.old.ts` (ููู ูุฏูู)
   - **ุงูุญุงูุฉ**: ูููู ุฅุฒุงูุชู ุฃู ุชุฑูู ููุชูุงูููุฉ

3. **`src/lib/db/tauriSqlClient.ts`**
   - ูุง ูุฒุงู ููุฌูุฏุงู ูููู ูุง ููุฌุฏ ุงุณุชุฎุฏุงู ูุดุท
   - ุชู ุงุณุชุจุฏุงูู ุจู PowerSync ูู ุฌููุน ุงููููุงุช ุงููุดุทุฉ
   - **ุงูุญุงูุฉ**: ูููู ุฅุฒุงูุชู ุฃู ุชุฑูู ููุชูุงูููุฉ

4. **`src/lib/db/schema/migrations/v43_unify_schema.ts`**
   - ููู migration ูุฏูู ูุณุชุฎุฏู `sqliteWriteQueue`
   - **ุงูุญุงูุฉ**: ููู migration ูุฏููุ ูููู ุชุฑูู ุฃู ุชุญุฏูุซู ูุงุญูุงู

## ๐ ุงูุฎูุงุตุฉ

### โ ูุง ุชู ุฅูุฌุงุฒู:
1. ุฌููุน ุงููููุงุช ุงููุดุทุฉ ุชุณุชุฎุฏู PowerSync ุจุงููุงูู โ
2. ุชู ุชุญููู `cleanupWorkSessionsOutbox.ts` ุฅูู PowerSync โ
3. ูุง ุชูุฌุฏ ูููุงุช ูุดุทุฉ ุชุณุชุฎุฏู `tauriSqlClient` ุฃู `WriteQueue` โ

### โ๏ธ ุงููููุงุช ุงููุฏููุฉ:
- ุฌููุน ุงููููุงุช ุงูุชู ุชุญุชูู ุนูู `.old` ูู ุงูุงุณู ุบูุฑ ูุดุทุฉ
- ูููู ุญุฐููุง ุจุฃูุงู ุจุนุฏ ุงูุชุฃูุฏ ูู ุนุฏู ุงูุญุงุฌุฉ ุฅูููุง

### ๐ง ุงูุชูุตูุงุช:
1. **ุญุฐู ุงููููุงุช ุงููุฏููุฉ** (ุงุฎุชูุงุฑู):
   - ุญุฐู ุฌููุน ุงููููุงุช ุงูุชู ุชุญุชูู ุนูู `.old` ูู ุงูุงุณู
   - ุญุฐู ูุฌูุฏ `src/lib/sync.old/` ุจุงููุงูู

2. **ุชูุธูู ุงูููุฏ** (ุงุฎุชูุงุฑู):
   - ุฅุฒุงูุฉ ุงูุชุนูููุงุช `TODO` ุงูุชู ุชุดูุฑ ุฅูู `sqliteWriteQueue`
   - ุฅุฒุงูุฉ ูููุงุช `tauriSqlClient.ts` ู `WriteQueue.ts` ุฅุฐุง ูู ุชุนุฏ ูุณุชุฎุฏูุฉ

3. **ุงูุชุญูู ุงูููุงุฆู**:
   - ุชุดุบูู ุงูุชุทุจูู ูุงูุชุฃูุฏ ูู ุฃู ูู ุดูุก ูุนูู ุจุดูู ุตุญูุญ
   - ูุฑุงูุจุฉ ุงูุณุฌูุงุช ููุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ูุชุนููุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

**โ ุงููุธุงู ุจุงููุงูู ูุณุชุฎุฏู PowerSync ุงูุขู!**

ุฌููุน ุงููููุงุช ุงููุดุทุฉ ุชุณุชุฎุฏู PowerSync ููุทุ ููุง ุชูุฌุฏ ูููุงุช ูุดุทุฉ ุชุณุชุฎุฏู ุฎุฏูุงุช ูุฏููุฉ ูุซู `tauriSqlClient` ุฃู `WriteQueue`.

### โ ุงููููุงุช ุงููุญููุฉ ูู ูุฐู ุงูุฌูุณุฉ:
1. โ `src/scripts/cleanupWorkSessionsOutbox.ts` - ุชู ุงูุชุญููู ูู `tauriSqlClient` ุฅูู PowerSync
2. โ `src/components/comprehensive-reports/hooks/useReportData.ts` - ุชู ุชุญููู `fetchProducts` ูู `tauriQuery` ุฅูู PowerSync

### ๐ ุงูุฅุญุตุงุฆูุงุช:
- **ุงููููุงุช ุงููุดุทุฉ**: ุฌููุนูุง ุชุณุชุฎุฏู PowerSync โ
- **ุงููููุงุช ุงููุญููุฉ**: 2 ูููุงุช โ
- **ุงููููุงุช ุงููุฏููุฉ**: ููุฌูุฏุฉ ูููู ุบูุฑ ูุดุทุฉ (ูููู ุญุฐููุง ูุงุญูุงู) โ๏ธ

