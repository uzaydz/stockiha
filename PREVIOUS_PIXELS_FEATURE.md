# ููุฒุฉ ุงุฎุชูุงุฑ ุงูุจูุณูุงุช ุงูุณุงุจูุฉ
## Previous Pixels Selection Feature

ุชุงุฑูุฎ ุงูุฅุถุงูุฉ: 11 ุฃูุชูุจุฑ 2025

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ ูุชุชุจุน ุงูุชุญูููุงุช ุงููุชูุฏู ุชุณูุญ ูููุณุชุฎุฏููู ุจุฅูุฌุงุฏ ูุงุฎุชูุงุฑ ุฌููุน ุงูุจูุณูุงุช ูุงูู Conversion APIs ุงูุชู ุชู ุงุณุชุฎุฏุงููุง ุณุงุจูุงู ูู ุงููุคุณุณุฉุ ุจุฏูุงู ูู ุฅุฏุฎุงููุง ูุฏููุงู ูู ูู ูุฑุฉ.

## โจ ุงูููุฒุงุช

### 1. **ุฌูุจ ุงูุจูุณูุงุช ุงูุณุงุจูุฉ**
- ุฌูุจ ุฌููุน ุจูุณูุงุช ููุณุจูู ุงููุณุชุฎุฏูุฉ ุณุงุจูุงู
- ุฌูุจ ุฌููุน ูุนุฑูุงุช ุฌูุฌู Ads & Analytics
- ุฌูุจ ุฌููุน ุจูุณูุงุช ุชูู ุชูู ุงููุณุชุฎุฏูุฉ ุณุงุจูุงู

### 2. **ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู**
- ุนุฏุฏ ุงูููุชุฌุงุช ุงูุชู ุชุณุชุฎุฏู ูู ุจูุณู
- ุชุงุฑูุฎ ุขุฎุฑ ุงุณุชุฎุฏุงู
- ุชุงุฑูุฎ ุฃูู ุงุณุชุฎุฏุงู

### 3. **ูุนูููุงุช Conversion API**
- ุนุฑุถ ุญุงูุฉ ุชูุนูู Conversion API ููู ุจูุณู
- ุฑูุฒ ุงููุตูู (Access Token) ุฅุฐุง ูุงู ูุชุงุญุงู
- ููุฏ ุงูุงุฎุชุจุงุฑ (Test Event Code)

### 4. **ูุงุฌูุฉ ูุณุชุฎุฏู ุณููุฉ**
- ูุงูุฐุฉ ุญูุงุฑ (Dialog) ููุธูุฉ
- ุนุฑุถ ุงูุจุทุงูุงุช ุจุดูู ุฌุฐุงุจ
- ุชุญุฏูุฏ ุณูู ูุณุฑูุน
- ุชุทุจูู ููุฑู ููุฅุนุฏุงุฏุงุช

## ๐ ุงููููุงุช ุงููุถุงูุฉ

### 1. **ูุงุนุฏุฉ ุงูุจูุงูุงุช**
```sql
migrations/get_previous_pixels_and_conversion_apis.sql
```
- ุฏุงูุฉ SQL ูุฌูุจ ุฌููุน ุงูุจูุณูุงุช ุงูุณุงุจูุฉ
- ููุงุฑุณ ููุฃุฏุงุก ุงูุฃูุซู
- ุฏุนู ูุงูู ูุฌููุน ุงูููุตุงุช

### 2. **Custom Hook**
```typescript
src/hooks/usePreviousPixels.ts
```
- Hook ูุฌูุจ ุงูุจูุณูุงุช ุชููุงุฆูุงู
- Hook lazy ููุชุญูู ุงููุฏูู
- TypeScript types ูุงููุฉ

### 3. **Component**
```typescript
src/components/tracking/PreviousPixelsSelector.tsx
```
- Component ูุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- ุฏุนู ุฌููุน ุงูููุตุงุช (Facebook, Google, TikTok)
- ูุงุฌูุฉ ูุณุชุฎุฏู ุงุญุชุฑุงููุฉ

### 4. **ุงูุชูุงูู**
```typescript
src/components/product/form/marketing-and-engagement/ConversionTrackingTab.tsx
```
- ุฅุถุงูุฉ ุฒุฑ "ุงุฎุชูุงุฑ ูู ุงูุณุงุจู" ููู ููุตุฉ
- ุชูุงูู ุณูุณ ูุน ุงููููุฐุฌ ุงูููุฌูุฏ

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏู ุงูููุงุฆู:

1. **ุงูุชูู ุฅูู ุฅุนุฏุงุฏุงุช ุงูููุชุฌ**
   - ุงูุชุญ ุงูููุชุฌ ุงูุฐู ุชุฑูุฏ ุชุนุฏููู
   - ุงูุชูู ุฅูู ุชุจููุจ "Marketing & Engagement"
   - ุงุฎุชุฑ "ุชุชุจุน ุงูุชุญูููุงุช ุงููุชูุฏู"

2. **ุงุฎุชูุงุฑ ุจูุณู ุณุงุจู**
   - ูุนูู ุงูููุตุฉ ุงููุทููุจุฉ (ููุณุจููุ ุฌูุฌูุ ุฃู ุชูู ุชูู)
   - ุงุถุบุท ุนูู ุฒุฑ "ุงุฎุชูุงุฑ ูู ุงูุณุงุจู" ๐
   - ุณุชุธูุฑ ูุงุฆูุฉ ุจุฌููุน ุงูุจูุณูุงุช ุงููุณุชุฎุฏูุฉ ุณุงุจูุงู

3. **ูุนุงููุฉ ูุงุฎุชูุงุฑ**
   - ุดุงูุฏ ุชูุงุตูู ูู ุจูุณู
   - ุงูุธุฑ ุนุฏุฏ ุงูููุชุฌุงุช ุงููุณุชุฎุฏูุฉ
   - ุชุญูู ูู ุชุงุฑูุฎ ุขุฎุฑ ุงุณุชุฎุฏุงู
   - ุญุฏุฏ ุงูุจูุณู ุงููุทููุจ

4. **ุชุทุจูู ุงูุฅุนุฏุงุฏุงุช**
   - ุงุถุบุท "ุชุทุจูู"
   - ุณูุชู ููุก ุฌููุน ุงูุญููู ุชููุงุฆูุงู
   - ุงุญูุธ ุงูููุชุฌ

### ูููุทูุฑูู:

#### ุงุณุชุฎุฏุงู Hook ูุจุงุดุฑุฉ:
```typescript
import { usePreviousPixels } from '@/hooks/usePreviousPixels';

function MyComponent({ organizationId }) {
  const { data, loading, error, refetch } = usePreviousPixels(organizationId);
  
  if (loading) return <div>ุฌุงุฑู ุงูุชุญููู...</div>;
  if (error) return <div>ุฎุทุฃ: {error}</div>;
  
  return (
    <div>
      <h3>ุจูุณูุงุช ููุณุจูู: {data.facebook_pixels.length}</h3>
      <h3>ุฌูุฌู: {data.google_tracking.length}</h3>
      <h3>ุชูู ุชูู: {data.tiktok_pixels.length}</h3>
    </div>
  );
}
```

#### ุงุณุชุฎุฏุงู Component ูุจุงุดุฑุฉ:
```typescript
import PreviousPixelsSelector from '@/components/tracking/PreviousPixelsSelector';

<PreviousPixelsSelector 
  form={form} 
  organizationId={organizationId} 
  platform="facebook" // or "google" or "tiktok"
/>
```

## ๐๏ธ ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ:
```sql
get_organization_previous_tracking_pixels(p_organization_id UUID)
```

### ุงูุจูุงูุงุช ุงููุนุงุฏุฉ:
```json
{
  "facebook_pixels": [
    {
      "pixel_id": "123456789012345",
      "conversion_api_enabled": true,
      "access_token": "EAAabc...",
      "test_event_code": "TEST12345",
      "product_count": 5,
      "last_used": "2025-10-11T10:00:00Z",
      "created_at": "2025-09-01T08:00:00Z"
    }
  ],
  "google_tracking": [...],
  "tiktok_pixels": [...],
  "organization_id": "uuid",
  "fetched_at": "2025-10-11T12:00:00Z"
}
```

## ๐ง ุชุซุจูุช ุงูููุฒุฉ

### 1. ุชุทุจูู Migration:
```bash
# ุชูููุฐ ุงูุฏุงูุฉ SQL
psql -d your_database < migrations/get_previous_pixels_and_conversion_apis.sql
```

ุฃู ูู Supabase Dashboard:
```sql
-- ุงูุณุฎ ูุญุชูู ููู get_previous_pixels_and_conversion_apis.sql
-- ูุงูุตูู ูู SQL Editor ููู ุจุชูููุฐู
```

### 2. ุงูุชุญูู ูู ุงูุชุซุจูุช:
```sql
-- ุงุฎุชุจุงุฑ ุงูุฏุงูุฉ
SELECT get_organization_previous_tracking_pixels('your-org-id');
```

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ููููุตุงุช ุงูุซูุงุซ:
- **ููุณุจูู**: ุฃููููุฉ ุฒุฑูุงุก ูุน ูุนูููุงุช Pixel ID ู Conversion API
- **ุฌูุฌู**: ุฃููููุฉ ุฎุถุฑุงุก ูุน Google Tag ID ู Conversion ID
- **ุชูู ุชูู**: ุฃููููุฉ ูุฑุฏูุฉ ูุน Pixel ID ู Events API

### ุงููุนูููุงุช ุงููุนุฑูุถุฉ ููู ุจูุณู:
- โ ูุนุฑู ุงูุจูุณู/Tag
- ๐ฆ ุนุฏุฏ ุงูููุชุฌุงุช ุงููุณุชุฎุฏูุฉ
- ๐ ุชุงุฑูุฎ ุขุฎุฑ ุงุณุชุฎุฏุงู
- ๐ ุญุงูุฉ Conversion/Events API
- ๐ ูุฌูุฏ Access Token (ูุญูู)

## ๐ ุงูุฃูุงู

- ุฌููุน ุฑููุฒ ุงููุตูู (Access Tokens) ูุญููุฉ
- ุงุณุชุฎุฏุงู SECURITY DEFINER ูู ุฏุงูุฉ SQL
- ุนุฏู ุนุฑุถ ุฑููุฒ ุงููุตูู ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู (ูุฎููุฉ)
- ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุคุณุณุฉ

## ๐ ุงูููุงุฆุฏ

### 1. **ุชูููุฑ ุงูููุช**
- ุนุฏู ุงูุญุงุฌุฉ ููุณุฎ ููุตู ูุนุฑูุงุช ุงูุจูุณู
- ุฅุนุฏุงุฏ ุณุฑูุน ููููุชุฌุงุช ุงูุฌุฏูุฏุฉ

### 2. **ุชูููู ุงูุฃุฎุทุงุก**
- ููุน ุงูุฃุฎุทุงุก ูู ูุชุงุจุฉ ูุนุฑูุงุช ุงูุจูุณู
- ุถูุงู ุงุณุชุฎุฏุงู ุงูุจูุณูุงุช ุงูุตุญูุญุฉ

### 3. **ุฅุฏุงุฑุฉ ูุฑูุฒูุฉ**
- ุฑุคูุฉ ุดุงููุฉ ูุฌููุน ุงูุจูุณูุงุช ุงููุณุชุฎุฏูุฉ
- ุชุชุจุน ุงุณุชุฎุฏุงู ุงูุจูุณูุงุช

### 4. **ุฅุญุตุงุฆูุงุช**
- ูุนุฑูุฉ ุงูุจูุณูุงุช ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู
- ุชุญููู ุงูุงุณุชุฎุฏุงู ุนุจุฑ ุงูููุช

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### 1. ูุง ุชุธูุฑ ุงูุจูุณูุงุช ุงูุณุงุจูุฉ:
```
ุงูุญู: ุชุฃูุฏ ูู ูุฌูุฏ ููุชุฌุงุช ุฃุฎุฑู ุชุณุชุฎุฏู ุจูุณูุงุช ูู ููุณ ุงููุคุณุณุฉ
```

### 2. ุฎุทุฃ ูู ุฌูุจ ุงูุจูุงูุงุช:
```
ุงูุญู: ุชุญูู ูู ุชุทุจูู migration ุจุดูู ุตุญูุญ
```

### 3. ุจุทุก ูู ุงูุชุญููู:
```
ุงูุญู: ุงูููุงุฑุณ ููุฌูุฏุฉ ุจุดูู ุชููุงุฆูุ ุชุญูู ูู ุนุฏุฏ ุงูุณุฌูุงุช
```

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### ุงูุชุฑุงุญุงุช ููุชุทููุฑ:
- [ ] ุฅุถุงูุฉ ููุฒุฉ ุงูุจุญุซ ูุงูููุชุฑุฉ
- [ ] ุนุฑุถ ุฅุญุตุงุฆูุงุช ุงูุฃุฏุงุก ููู ุจูุณู
- [ ] ุฅููุงููุฉ ุญุฐู ุงูุจูุณูุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ
- [ ] ุชุตุฏูุฑ ูุงุฆูุฉ ุงูุจูุณูุงุช
- [ ] ุฏุนู ููุตุงุช ุฅุถุงููุฉ (Snapchat, Twitter, etc.)

## ๐ ููุงุญุธุงุช

- ุงูููุฒุฉ ุชุนูู ููุท ุฏุงุฎู ููุณ ุงููุคุณุณุฉ
- ูุชู ุฌูุจ ุงูุจูุงูุงุช ูู ุฌุฏูู `product_marketing_settings`
- ูุง ูุชู ุญูุธ ุฑููุฒ ุงููุตูู ูู Local Storage
- ุฌููุน ุงูุจูุงูุงุช ูุญููุฉ ุจู RLS (Row Level Security)

## ๐ฏ ุงูุฎูุงุตุฉ

ูุฐู ุงูููุฒุฉ ุชุฌุนู ุนูููุฉ ุฅุฏุงุฑุฉ ุงูุจูุณูุงุช ูุงูู Conversion APIs ุฃุณูู ูุฃุณุฑุน ูุฃูุซุฑ ุฃูุงูุงู. ุชุณุชุทูุน ุงูุขู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุจูุณูุงุช ุงูุณุงุจูุฉ ุจููุฑุฉ ุฒุฑ ูุงุญุฏุฉ!

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ:** AI Assistant  
**ุงูุชุงุฑูุฎ:** 11 ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 1.0.0

