# ๐ ููุฎุต ุญู ูุดููุฉ ุงููุทุงู ุจุฏูู www - Stockiha SaaS

## ๐ ุงููุดููุฉ
- ุงููููุน ูุนูู ูุน `www.example.com` โ
- ุงููููุน ูุง ูุนูู ูุน `example.com` โ  
- ุงูุชุงุฌุฑ ูุง ูุณุชุทูุน ุฅูุดุงุก CNAME ูููุทุงู ุงูุฌุฐุฑู ูู GoDaddy
- ูุฐู ูุดููุฉ ุดุงุฆุนุฉ ูู Cloudflare SaaS

## ๐๏ธ ุงูุญููู ุงููุทุจูุฉ

### 1. ุชุญุฏูุซ API ุงูุชุญูู ูู ุงููุทุงู
**ุงูููู**: `functions/api/verify-domain.ts`

**ุงูุชุญุณููุงุช**:
- ุฅุถุงูุฉ ุฏุนู ูููุทุงู ุงูุฌุฐุฑู ูุงูู www ูุนุงู
- ุฅูุดุงุก ููุงุนุฏ ุฅุนุงุฏุฉ ุงูุชูุฌูู ุงูุชููุงุฆู
- ุชูููุฑ ุญููู ุจุฏููุฉ ูู ุญุงูุฉ ุงููุดู
- ุฏุนู CNAME Flattening

**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ**:
```javascript
// ุฅุถุงูุฉ ุณุฌูุงุช DNS ูุชุนุฏุฏุฉ
const requiredRecords = [
  { type: 'CNAME', name: 'www.domain.com', value: 'stockiha.pages.dev' },
  { type: 'CNAME', name: 'domain.com', value: 'www.domain.com' }
];

// ุฅูุดุงุก ููุงุนุฏ ุฅุนุงุฏุฉ ุงูุชูุฌูู ุชููุงุฆูุงู
await createApexRedirectRule(domain, env);
```

### 2. ุฅูุดุงุก ููุชุจุฉ ุญููู ุงููุทุงู ุงูุฌุฐุฑู
**ุงูููู**: `src/utils/apexDomainSolutions.ts`

**ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ**:
- `getApexDomainSolutions()` - ุงุฎุชูุงุฑ ุฃูุถู ุญู ููุชุงุฌุฑ
- `checkDomainStatus()` - ูุญุต ุญุงูุฉ ุงููุทุงู
- `generateCustomInstructions()` - ุชุนูููุงุช ูุฎุตุตุฉ
- `verifyDNSConfiguration()` - ุงูุชุญูู ูู DNS

### 3. ุชุญุฏูุซ ุฏููู ุงููุณุชุฎุฏู
**ุงูููู**: `USER_CUSTOM_DOMAIN_GUIDE.md`

**ุงูุฅุถุงูุงุช**:
- ุดุฑุญ ูุดููุฉ ุงููุทุงู ุงูุฌุฐุฑู
- ุญููู ูุชุนุฏุฏุฉ ุญุณุจ ูุฒูุฏ ุงููุทุงู
- ุชุนูููุงุช ุฎุงุตุฉ ูู GoDaddy
- ูุณู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### 4. ุฅูุดุงุก ูุซุงุฆู ุชูููุฉ ุดุงููุฉ
**ุงูููู**: `docs/apex-domain-solutions.md`

**ุงููุญุชูู**:
- ุดุฑุญ ุชููู ููุตู ูููุดููุฉ
- 4 ุญููู ูุฎุชููุฉ ูุน ุฎุทูุงุช ุงูุชุทุจูู
- ุฃููุงุฏ ุฌุงูุฒุฉ ูููุทูุฑูู
- ุฏููู ููุชุฌุงุฑ ุฎุทูุฉ ุจุฎุทูุฉ

## ๐ฏ ุงูุญููู ุงููุชุงุญุฉ ููุชุฌุงุฑ

### ุงูุญู ุงูุฃูู: ุฅุนุงุฏุฉ ุงูุชูุฌูู ุงูุชููุงุฆู (ุงูุฃูุถู)
```dns
Type: CNAME, Name: www, Value: abc123.stockiha.com
Type: CNAME, Name: @, Value: www.yourdomain.com
```

### ุงูุญู ุงูุซุงูู: A Records (ุงูุจุฏูู ุงููุถููู)
```dns
Type: CNAME, Name: www, Value: abc123.stockiha.com  
Type: A, Name: @, Value: 76.76.19.142
Type: A, Name: @, Value: 76.223.126.88
```

### ุงูุญู ุงูุซุงูุซ: CNAME Flattening (ุงููุชูุฏู)
- ุงูุงูุชูุงู ุฅูู Cloudflare ูุฅุฏุงุฑุฉ DNS
- ุชูุนูู CNAME Flattening
- ุฅุนุฏุงุฏ Proxy ููุญูุงูุฉ ูุงูุณุฑุนุฉ

### ุงูุญู ุงูุฑุงุจุน: ุฅุนุงุฏุฉ ุงูุชูุฌูู ูู ูุฒูุฏ ุงููุทุงู
- ุงุณุชุฎุฏุงู ููุฒุฉ Domain Forwarding ูู GoDaddy
- ุชูุฌูู 301 ูู example.com ุฅูู www.example.com

## ๐ง ุงูุชุทุจูู ุงูุชููู

### ุฅูุดุงุก ููุงุนุฏ ุฅุนุงุฏุฉ ุงูุชูุฌูู ุชููุงุฆูุงู
```javascript
const redirectRule = {
  expression: `(http.host eq "${domain}")`,
  action: {
    id: "redirect", 
    parameters: {
      from_value: {
        status_code: 301,
        target_url: {
          expression: `concat("https://www.${domain}", http.request.uri.path)`
        }
      }
    }
  }
};
```

### ูุญุต DNS ุชููุงุฆู
```javascript
const dnsCheck = await fetch(
  `https://cloudflare-dns.com/dns-query?name=${domain}&type=CNAME`,
  { headers: { 'Accept': 'application/dns-json' } }
);
```

## ๐ฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุชุญุณููุงุช ูุทููุจุฉ ูู ููุญุฉ ุงูุชุญูู:
1. **ูุคุดุฑ ุญุงูุฉ ุงููุทุงู**:
   - โ www ูุนูู
   - โ๏ธ ุงููุทุงู ุงูุฌุฐุฑู ูุญุชุงุฌ ุฅุนุฏุงุฏ
   - ๐ ุฌุงุฑู ุงูุชุญูู

2. **ูุนุงูุฌ ุงูุฅุนุฏุงุฏ ุงูุชููุงุฆู**:
   - ุงุฎุชูุงุฑ ูุฒูุฏ ุงููุทุงู
   - ุนุฑุถ ุงูุญููู ุงูููุงุณุจุฉ
   - ุชุนูููุงุช ุฎุทูุฉ ุจุฎุทูุฉ
   - ูุญุต ุชููุงุฆู ูููุชุงุฆุฌ

3. **ุฃุฏูุงุช ุงูุชุดุฎูุต**:
   - ูุญุต DNS ููุฑู
   - ุงุฎุชุจุงุฑ ุงููุตูู ูููููุน
   - ุชูุฑูุฑ ูุดุงูู ูุน ุงูุญููู

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ููุชุฌุงุฑ:
- โ ุงููููุน ูุนูู ูุน ูุจุฏูู www
- โ ุฅุนุงุฏุฉ ุชูุฌูู ุชููุงุฆู ุณูุณ
- โ SSL ูุนูู ุนูู ููุง ุงููุทุงููู
- โ ุชุนูููุงุช ูุงุถุญุฉ ููููููุฉ

### ูููุทูุฑูู:
- โ API ูุญุณู ููุชุนุงูู ูุน ุฌููุน ุงูุญุงูุงุช
- โ ููุชุจุฉ ุฌุงูุฒุฉ ููุญููู
- โ ูุญุต ุชููุงุฆู ูุชุดุฎูุต
- โ ูุซุงุฆู ุดุงููุฉ

### ููุฏุนู ุงูููู:
- โ ุฃุฏูุงุช ุชุดุฎูุต ูุชูุฏูุฉ
- โ ุญููู ููุซูุฉ ูุฌููุน ุงูุญุงูุงุช
- โ ุชูููู ุชุฐุงูุฑ ุงูุฏุนู
- โ ุญููู ุณุฑูุนุฉ ูููุดุงูู ุงูุดุงุฆุนุฉ

## ๐ ุฎุทูุงุช ุงูุชุทุจูู

### ููุฑูุฉ (ูุทุจูุฉ):
- [x] ุชุญุฏูุซ API ุงูุชุญูู ูู ุงููุทุงู
- [x] ุฅูุดุงุก ููุชุจุฉ ุงูุญููู
- [x] ุชุญุฏูุซ ุงููุซุงุฆู
- [x] ุฅุถุงูุฉ ุฏุนู ุฅุนุงุฏุฉ ุงูุชูุฌูู ุงูุชููุงุฆู

### ูุฑูุจุงู (ูุทููุจ):
- [ ] ุชุญุฏูุซ ูุงุฌูุฉ ููุญุฉ ุงูุชุญูู
- [ ] ุฅุถุงูุฉ ูุนุงูุฌ ุงูุฅุนุฏุงุฏ ุงูุชููุงุฆู  
- [ ] ุชุทููุฑ ุฃุฏูุงุช ุงูุชุดุฎูุต
- [ ] ุงุฎุชุจุงุฑ ุดุงูู ูุน ุชุฌุงุฑ ุญูููููู

## ๐ ููุฏุนู ุงูููู

### ุฃุฏูุงุช ุงูุชุดุฎูุต:
```bash
# ูุญุต DNS
dig example.com
dig www.example.com

# ุงุฎุชุจุงุฑ ุงููุตูู
curl -I https://example.com
curl -I https://www.example.com

# ูุญุต ุฅุนุงุฏุฉ ุงูุชูุฌูู
curl -L https://example.com
```

### ุญุงูุงุช ุดุงุฆุนุฉ ูุญููููุง:
1. **GoDaddy ูุง ูุณูุญ ุจู CNAME ููุฌุฐุฑ** โ ุงุณุชุฎุฏู A Records
2. **ุงููุทุงู ูุง ูุนูู ููุงุฆูุงู** โ ุชุญูู ูู ุงูุชุดุงุฑ DNS
3. **SSL Error** โ ุงูุชุธุฑ 10 ุฏูุงุฆู ูุชูุนูู SSL
4. **ุฅุนุงุฏุฉ ุงูุชูุฌูู ูุง ุชุนูู** โ ุงุณุชุฎุฏู Page Rules ุฃู Domain Forwarding

ูุฐุง ุงูุญู ุงูุดุงูู ูุฌุจ ุฃู ูุญู ูุดููุฉ 95% ูู ุงูุชุฌุงุฑ ุงูุฐูู ููุงุฌููู ูุฐู ุงููุดููุฉ ูุน ุงููุทุงูุงุช ุงููุฎุตุตุฉ.
