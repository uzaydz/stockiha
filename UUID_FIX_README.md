# ๐ง ุฅุตูุงุญ ูุดููุฉ UUID ูู ุฅูุดุงุก ุงูููุชุฌุงุช

## ๐ **ุงููุดููุฉ**

ูุงูุช ููุงู ูุดููุฉ ูู ุฅูุดุงุก ุงูููุชุฌุงุช ุงูุฌุฏูุฏุฉ ุญูุซ ูุธูุฑ ุฎุทุฃ "invalid uuid" ุจุณุจุจ:

1. **ุนุฏู ุชุนููู `organization_id` ุจุดูู ุตุญูุญ** ูู ุงููููุฐุฌ
2. **ุนุฏู ุงูุชุญูู ูู ุตุญุฉ UUID** ูุจู ุงูุฅุฑุณุงู
3. **ุนุฏู ูุนุงูุฌุฉ ุฃุฎุทุงุก UUID** ุจุดูู ููุงุณุจ

## โ **ุงูุญููู ุงููุทุจูุฉ**

### **1. ุฅุตูุงุญ ProductForm.tsx**

```typescript
// โ ุชุนููู organization_id ูู ุงูุจุฏุงูุฉ
organization_id: organizationIdFromTenant || '',

// โ ุฅุถุงูุฉ useEffect ูุชุญุฏูุซ organization_id ุนูุฏ ุชุบููุฑ ุงููุคุณุณุฉ
useEffect(() => {
  if (organizationIdFromTenant && organizationIdFromTenant !== form.getValues('organization_id')) {
    form.setValue('organization_id', organizationIdFromTenant);
  }
}, [organizationIdFromTenant, form]);
```

### **2. ุฅุตูุงุญ productFormHelpers.ts**

```typescript
// โ ุงูุชุญูู ูู ุตุญุฉ organization_id
if (!organizationId || organizationId === 'undefined' || organizationId === 'null' || organizationId.trim() === '') {
  throw new Error('ูุนุฑู ุงููุคุณุณุฉ ูุทููุจ ูุตูุบุชู ุบูุฑ ุตุญูุญุฉ');
}

// โ ุงูุชุญูู ูู ุตุญุฉ UUID
const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
if (!uuidRegex.test(organizationId)) {
  throw new Error('ูุนุฑู ุงููุคุณุณุฉ ูุฌุจ ุฃู ูููู ุจุตูุบุฉ UUID ุตุญูุญุฉ');
}
```

### **3. ุฅุตูุงุญ products.ts API**

```typescript
// โ ุงูุชุญูู ูู ุตุญุฉ organization_id ูุจู ุฃู ุดูุก
if (!productData.organization_id) {
  const error = new Error("ูุนุฑู ุงููุคุณุณุฉ ูุทููุจ");
  toast.error("ูุนุฑู ุงููุคุณุณุฉ ูุทููุจ");
  throw error;
}

// โ ุงูุชุญูู ูู ุตุญุฉ UUID
const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
if (!uuidRegex.test(productData.organization_id)) {
  const error = new Error("ูุนุฑู ุงููุคุณุณุฉ ูุฌุจ ุฃู ูููู ุจุตูุบุฉ UUID ุตุญูุญุฉ");
  toast.error("ูุนุฑู ุงููุคุณุณุฉ ูุฌุจ ุฃู ูููู ุจุตูุบุฉ UUID ุตุญูุญุฉ");
  throw error;
}

// โ ูุนุงูุฌุฉ ุฎุงุตุฉ ูุฃุฎุทุงุก UUID
if (createError.message?.includes('invalid input syntax for type uuid')) {
  toast.error("ุฎุทุฃ ูู ุตูุบุฉ ูุนุฑู ุงููุคุณุณุฉ ุฃู ุงููุฆุฉ. ูุฑุฌู ุงูุชุญูู ูู ุงูุจูุงูุงุช");
  throw new Error("Invalid UUID format in product data");
}
```

## ๐ **ุงูููุงุฆุฏ ูู ุงูุฅุตูุงุญ**

1. **ููุน ุฃุฎุทุงุก UUID**: ุงูุชุญูู ูู ุตุญุฉ UUID ูุจู ุงูุฅุฑุณุงู
2. **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ**: ุฑุณุงุฆู ุฎุทุฃ ุจุงููุบุฉ ุงูุนุฑุจูุฉ ุชูุถุญ ุงููุดููุฉ
3. **ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก**: ูุนุงูุฌุฉ ุฎุงุตุฉ ูุฃุฎุทุงุก UUID
4. **ุชุนููู ุชููุงุฆู**: ุชุนููู `organization_id` ุชููุงุฆูุงู ูู ุงููุคุณุณุฉ ุงูุญุงููุฉ
5. **ุชุญุฏูุซ ุฏููุงูููู**: ุชุญุฏูุซ `organization_id` ุนูุฏ ุชุบููุฑ ุงููุคุณุณุฉ

## ๐งช **ููููุฉ ุงูุงุฎุชุจุงุฑ**

1. **ุฅูุดุงุก ููุชุฌ ุฌุฏูุฏ**: ุชุฃูุฏ ูู ุนุฏู ุธููุฑ ุฎุทุฃ UUID
2. **ุชุบููุฑ ุงููุคุณุณุฉ**: ุชุฃูุฏ ูู ุชุญุฏูุซ `organization_id` ุชููุงุฆูุงู
3. **ุฑุณุงุฆู ุงูุฎุทุฃ**: ุชุฃูุฏ ูู ุธููุฑ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ

## ๐ **ููุงุญุธุงุช ูููุฉ**

- ุชู ุฅุถุงูุฉ ุงูุชุญูู ูู UUID ูู ุซูุงุซ ูุฑุงุญู: ุงููููุฐุฌุ ุงููุณุงุนุฏุงุชุ ูุงูู API
- ุชู ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฎุงุตุฉ ูุฃุฎุทุงุก UUID ูุน ุฑุณุงุฆู ูุงุถุญุฉ
- ุชู ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ูุน ุฑุณุงุฆู ุฎุทุฃ ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- ุชู ุฅุถุงูุฉ logging ุฃูุถู ูุชุชุจุน ุงูุฃุฎุทุงุก

## ๐ **ูููุงุช ุชู ุชุนุฏูููุง**

1. `src/pages/ProductForm.tsx` - ุฅุตูุงุญ ุชุนููู organization_id
2. `src/utils/product/productFormHelpers.ts` - ุฅุถุงูุฉ ุงูุชุญูู ูู UUID
3. `src/lib/api/products.ts` - ุฅุถุงูุฉ ุงูุชุญูู ูู UUID ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ**: 2025-01-14  
**ุงูุญุงูุฉ**: โ ููุชูู  
**ุงููุทูุฑ**: AI Assistant
